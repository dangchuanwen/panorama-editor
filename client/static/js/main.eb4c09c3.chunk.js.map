{"version":3,"sources":["pages/studio/index.module.css","pages/studio/modules/images-bar/components/classes.module.css","pages/studio/modules/images-bar/classes.module.css","pages/signin/style.module.css","interface.ts","requests/requests.ts","language/index.tsx","auth/auth.tsx","HOCRoute/public.route.tsx","HOCRoute/protected.route.tsx","assets/logo.png","components/LanguageSelecter.tsx","pages/signin/index.tsx","pages/signup/index.tsx","assets/VR.png","layouts.tsx","pages/home/menu-module/styled.tsx","pages/home/menu-module/index.tsx","hooks/useUser.ts","pages/home/index.tsx","components/Iconfont.tsx","pages/home/contents-module/friends/index.tsx","pages/home/contents-module/components/comment.tsx","pages/home/contents-module/components/comments.tsx","pages/home/contents-module/components/publishedWork.item.tsx","pages/home/contents-module/components/publishedWork.list.tsx","pages/home/contents-module/exhibition/index.tsx","pages/home/contents-module/works/styled.tsx","pages/home/contents-module/works/components/Operation.tsx","pages/home/contents-module/works/components/Works.tsx","pages/home/routes.tsx","pages/home/contents-module/works/index.tsx","utils.ts","pages/studio/components/HotSpot.tsx","assets/link.png","assets/tip.png","pages/studio/state/state.ts","pages/studio/state/context.tsx","pages/studio/modules/tool-bar/index.tsx","pages/studio/modules/property-bar/styled.tsx","pages/studio/modules/property-bar/index.tsx","pages/studio/modules/canvas/index.tsx","components/styled.tsx","components/UploadButton.tsx","pages/studio/modules/images-bar/components/styled.tsx","pages/studio/modules/images-bar/components/ImageList.tsx","pages/studio/modules/images-bar/styled.tsx","pages/studio/modules/images-bar/index.tsx","pages/studio/index.tsx","pages/play/index.tsx","routes/config.tsx","routes/index.tsx","App.tsx","reportWebVitals.ts","index.tsx","pages/home/contents-module/components/classes.module.css","pages/studio/components/classes.module.css"],"names":["module","exports","HOCRouteTypes","Country","ToolNames","Gender","countries","text","value","China","nationalFlag","Uzbekistan","Indonesia","getCountryData","country","find","item","request","axios","create","interceptors","use","config","headers","Authorization","getAccessTokenFromLocalStorage","err","Promise","reject","HttpErrorMessage","Map","set","LanguageNames","showHttpError","prefix","response","status","has","message","warn","get","error","data","register","userName","password","gender","a","post","login","getUserWorks","createWork","workName","getQiniuToken","getWorkData","workID","updateWork","panoramaTourConfig","put","publishWork","introduction","getUserPublishedWorkByWorkID","getPublishedWorksBeforeArchorDate","archorDate","Date","getTime","addComment","content","commentedPublishedWorkID","deleteComment","commentID","delete","getLanguagePackage","languageName","ACCESS_TOKEN","saveAccessTokenToLocalStorage","access_token","localStorage","setItem","getItem","authContext","createContext","AuthProvider","children","auth","useState","user","setUser","authenticated","setAuthenticated","useEffect","requests","res","resolve","logout","createAuth","Provider","useAuth","PublicRoute","rest","useContext","to","ProtectedRoute","saveLanaugeToLocalStorage","getLanguageFromLocalStorage","cn","useLanguageState","setLanguageName","languagePackage","setLanguagePackage","updateLanguagePackage","LanguageContext","LanguageWrapper","Option","Select","LanguageSelecter","languages","name","label","en","language","defaultValue","onChange","val","handleSelectLanguage","bordered","map","SignIn","React","setUserName","setPassword","history","useHistory","handleClickLogin","success","replace","className","styles","wrapper","Container","maxWidth","container","Grid","xs","posterWrapper","src","alt","Logo","formWrapper","childrenInRight","Button","variant","titleLine","inputLine","TextField","InputProps","style","fontSize","InputLabelProps","onInput","e","target","fullWidth","size","type","forgetPasswordLink","submitButton","onClick","SignUp","Female","setGender","setCountry","handleClickCreate","HaveAccountYet","Login","WelcomeToPanoramicWorld","Register","Username","Password","CountryOptions","width","marginRight","renderCountrySelecter","RadioGroup","Number","flexDirection","FormControlLabel","control","Radio","color","Male","Box","marginTop","CreateRightNow","Wrapper","styled","MatContainer","LogoBox","img","HeaderBox","MenuBox","ContentBox","MenuItem","MenuIcon","i","menuConfig","pathname","iconClass","Menu","onClickMenuItem","useLocation","activated","backgroundColor","path","localUser","undefined","useUser","fetchUser","console","log","Home","useRouteMatch","VR","fontWeight","window","location","reload","push","renderRoutes","Iconfont","cursor","borderRadius","friendsContext","commentable","Friends","loadData","setLoadData","publishedWorksOfGroupMembers","setPublishedWorksOfGroupMembers","handleComment","commentContent","handleDeleteComment","fetchPublishedWorksOfGroupMembers","padding","maxHeight","overflow","publishedWorks","Comment","comment","_id","avatar","publisher","countryData","cardHeaderActionComponent","IconButton","Delete","Card","classes","CardHeader","commentHeader","title","action","subheader","CardContent","Typography","component","Comments","commentsDatas","comments","filter","Boolean","length","PublishedWorkItem","publishedWork","author","work","firstScene","default","workPoster","scenes","panorama","userCountryData","avatorOfGender","marginBottom","boxShadow","display","alignItems","Avatar","marginLeft","margin","imageWrapper","position","backDrop","height","bgcolor","Tooltip","placement","arrow","open","CardActions","Search","placeholder","onSearch","enterButton","PublishedWorkList","index","description","Exhibition","setArchorDate","setPublishedWorks","newPublishedWorks","fetchPublishedWorksBeforeArchorDate","Array","isArray","earliestPublishedWork","createdTime","OperationWrapper","WorksWrapper","WorksTitle","h2","WorksBox","ul","IconFont","WorkItem","li","WorkThumbnail","Operation","onConfirm","showDialog","setShowDialog","setWorkName","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","trim","Works","works","firstSceneImage","href","routes","exact","redirect","load","setLoad","setWorks","fetchData","handleConfirmCreate","generateUniqueId","String","Math","ceil","now","random","importPanoramaTourConfig","panoramaImages","sceneIDs","Object","keys","sceneID","scene","sceneHotSPots","hotSpots","hotSpotsDev","hotSpotProd","hotSpotDev","id","yaw","pitch","fontContent","toolName","targetID","sceneId","url","isEntry","exportPanoramaTourConfig","hotSpotsOfItem","hotSpot","newHotSpot","Link","findIndex","image","autoLoad","ToolIcons","Tip","createTooltip","hotSpotDiv","tipSpan","document","createElement","innerHTML","draggable","classList","add","ToolIcon","iconImage","tag","iconHotSpot","appendChild","Font","fontTag","fontHotSpot","createTooltipInDev","_toolName","cb","activatedHotSpot","images","StudioContext","StudioContextWrapper","split","studioState","setPanoramaImages","renderCanvasFlag","setRenderCanvasFlag","params","uploadPanoramaTourConfig","switchHotSpot","newImages","activatedImage","forEach","addImage","newImage","deSelectAllHotSpots","switchImage","imageID","clickedImage","removeImage","addHotSpot","updateActivatedHotSpot","removeActivatedHotSpot","hotSpotID","initPanoramaImages","clickHandlerFunc","_e","clickHandlerArgs","createTooltipFunc","set_Yaw_Pitch","useStudioState","useStylesBootstrap","makeStyles","tooltip","ToolBar","showPublishDialog","setShowPublishDialog","setIntroduction","currentRoute","handleClickPublish","handleConfirmPublish","handleClickSave","handleDragStart","dataTransfer","setData","onDragStart","keyboard","centered","visible","onOk","onCancel","helperText","minRows","multiline","Title","h4","PropertyBar","newContent","handleInputFontContent","rows","newText","handleInputTip","nextSceneID","handleSelectTargetPanoramaImage","labelId","reduce","prev","next","startIcon","oldHotSpots","Canvas","pannellumInstance","setPannellumInstance","activatedImageID","hotSpotsOfActivatedImage","removeHotSpot","reRenderImageHotSpotsOnCanvas","handleClickHotSpot","destroy","p","pannellum","viewer","sceneFadeDuration","scene0","on","getYaw","getPitch","onContextMenuCapture","stopPropagation","preventDefault","onDrop","mouseEventToCoords","handleMouseDrop","getData","onDragOver","FileInput","input","UploadButton","onChooseImage","justifyContent","files","accept","htmlFor","CloudUpload","Image","SliderBox","ImageBox","ImageList","onClickImage","ImagesBar","loading","setLoading","token","setToken","uploadFile","file","observer","complete","qiniu","subscribe","handleChooseFile","process","hash","fetchToken","Backdrop","backdrop","CircularProgress","Studio","contentLayout","gridArea","border","Play","addHotSpotStyle","key","HOCRouteType","protected","HomePageRoutes","public","HOCRoutes","searchRoutesByPath","route","matchedRoutes","pathPrefix","Routes","RouteComponent","Route","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.eb4c09c3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"studio_container__1saTB\",\"contentLayout\":\"studio_contentLayout__3snNS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"activated\":\"classes_activated__3vgEV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"classes_backdrop__6U9nE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"style_wrapper__mYcuQ\",\"container\":\"style_container__1nXix\",\"posterWrapper\":\"style_posterWrapper__2AqIF\",\"formWrapper\":\"style_formWrapper__1p6Bx\",\"childrenInRight\":\"style_childrenInRight__2OTdS\",\"titleLine\":\"style_titleLine__1Ndc_\",\"inputLine\":\"style_inputLine__2gtCs\",\"input\":\"style_input__q0Wsk\",\"forgetPasswordLink\":\"style_forgetPasswordLink__1nKBB\",\"submitButton\":\"style_submitButton__11Sg3\"};","import React from 'react';\r\nimport { RouteProps } from 'react-router';\r\nimport { IHotSpot } from 'types/pannellum/interface';\r\nexport type IHOCRoute = React.FC<RouteProps>;\r\nexport enum HOCRouteTypes {\r\n  public,\r\n  protected,\r\n}\r\nexport enum Country {\r\n  China,\r\n  Uzbekistan,\r\n  Indonesia,\r\n}\r\nexport type CountryData = {\r\n  text: string;\r\n  value: Country;\r\n  nationalFlag: string;\r\n};\r\nexport const countries: CountryData[] = [\r\n  { text: '中国', value: Country.China, nationalFlag: 'http://icetnnu.ltd/national-flag-cn.png' },\r\n  { text: '乌兹别克斯坦', value: Country.Uzbekistan, nationalFlag: 'http://icetnnu.ltd/national-flag-uzb.png' },\r\n  { text: '印度尼西亚', value: Country.Indonesia, nationalFlag: 'http://icetnnu.ltd/national-flag-idn.png' },\r\n];\r\nexport const getCountryData: (c: Country) => CountryData | undefined = (country: Country) => {\r\n  return countries.find((item) => item.value === country);\r\n};\r\nexport enum ToolNames {\r\n  Link = 'Link',\r\n  Tip = 'Tip',\r\n  Font = 'Font',\r\n}\r\nexport enum Gender {\r\n  Male,\r\n  Female,\r\n}\r\nexport const getAvatorOfGender: (g: Gender) => string = (gender: Gender) => {\r\n  return gender === Gender.Female ? 'http://icetnnu.ltd/female.png' : 'http://icetnnu.ltd/male.png';\r\n};\r\nexport type QiniuCompeleteRes = {\r\n  key: string;\r\n  hash: string;\r\n};\r\nexport type IPanoramaTourItem = {\r\n  panoramaImageUrl: string;\r\n  hotSpots: IHotSpot[];\r\n};\r\n","import { message } from 'antd';\r\nimport { getAccessTokenFromLocalStorage } from 'auth/auth';\r\nimport axios, { AxiosInstance, AxiosError, AxiosPromise, AxiosRequestConfig } from 'axios';\r\nimport { Country, Gender, ToolNames } from 'interface';\r\nimport { LanguageNames } from 'language';\r\nimport { WebsiteTexts } from 'language/interface';\r\n\r\ntype HotSpot = {\r\n  pitch: number;\r\n  yaw: number;\r\n  text: string;\r\n  type: 'scene' | 'info';\r\n  sceneId?: string;\r\n  fontContent?: string;\r\n  toolName: ToolNames;\r\n};\r\n\r\ntype Scene = {\r\n  hotSpots: HotSpot[];\r\n  panorama: string;\r\n  type: string;\r\n  yaw: number;\r\n  pitch: number;\r\n};\r\nexport type LoginResult = { access_token: string; user: User };\r\nexport type PanoramaTourConfig = {\r\n  default: {\r\n    firstScene: string;\r\n  };\r\n  scenes: {\r\n    [key: string]: Scene;\r\n  };\r\n};\r\nexport type User = {\r\n  userName: string;\r\n  gender: Gender;\r\n  country: Country;\r\n};\r\nexport type Work = {\r\n  _id: string;\r\n  workName: string;\r\n  panoramaTourConfig: PanoramaTourConfig;\r\n};\r\nexport type Comment = {\r\n  _id: string;\r\n  publisher: User;\r\n  content: string;\r\n};\r\nexport type PublishedWork = {\r\n  _id: string;\r\n  createdTime: Date;\r\n  introduction: string;\r\n  work: Work;\r\n  author: User;\r\n  comments: Comment[];\r\n};\r\n\r\ntype Register = (userName: string, password: string, gender: Gender, country: Country) => AxiosPromise;\r\ntype Login = (userName: string, password: string) => AxiosPromise<LoginResult>;\r\ntype GetUserWorks = () => AxiosPromise<Work[]>;\r\ntype CreateWork = (workName: string) => AxiosPromise;\r\ntype GetQiniuToken = () => AxiosPromise<string>;\r\ntype GetWorkData = (workID: string) => AxiosPromise<Work>;\r\ntype UpdateWork = (workName: string, panoramaTourConfig: PanoramaTourConfig | null) => AxiosPromise<Work>;\r\ntype PublishWork = (workID: string, introduction: string) => AxiosPromise;\r\ntype GetUserPublishedWorkByWorkID = (workID: string) => AxiosPromise<PublishedWork>;\r\ntype GetPublishedWorksBeforeArchorDate = (archorDate: Date) => AxiosPromise<PublishedWork[]>;\r\ntype GetUserInformation = () => AxiosPromise<User>;\r\ntype GetPublishedWorksOfGroupMembers = () => AxiosPromise<PublishedWork[]>;\r\ntype AddComment = (commentContent: string, commentedPublishedWorkID: string) => AxiosPromise;\r\ntype DeleteComment = (commentID: string) => AxiosPromise;\r\ntype GetLanguagePackage = (languageName: LanguageNames) => AxiosPromise<WebsiteTexts>;\r\n\r\nconst request: AxiosInstance = axios.create();\r\nrequest.interceptors.request.use(\r\n  (config: AxiosRequestConfig) => {\r\n    config.headers.Authorization = `Bearer ${getAccessTokenFromLocalStorage()}`;\r\n    return config;\r\n  },\r\n  (err) => {\r\n    return Promise.reject(err);\r\n  },\r\n);\r\n\r\nexport const HttpErrorMessage: Map<number, string> = new Map();\r\nHttpErrorMessage.set(409, '已存在');\r\n\r\nexport const showHttpError: (err: AxiosError, prefix?: string) => void = (err: AxiosError, prefix = '') => {\r\n  if (err.response?.status && HttpErrorMessage.has(err.response?.status)) {\r\n    message.warn(prefix + HttpErrorMessage.get(err.response?.status));\r\n  } else {\r\n    message.error(err.response?.data.message);\r\n  }\r\n};\r\n\r\nexport const register: Register = async (userName: string, password: string, gender: Gender, country: Country) => {\r\n  return request.post('/users', { userName, password, gender, country });\r\n};\r\n\r\nexport const login: Login = async (userName: string, password: string) => {\r\n  return request.post<LoginResult>('/users/login', { userName, password });\r\n};\r\n\r\nexport const getUserWorks: GetUserWorks = async () => {\r\n  return request.get<Work[]>('/works');\r\n};\r\n\r\nexport const createWork: CreateWork = async (workName: string) => {\r\n  return request.post('/works', { workName });\r\n};\r\n\r\nexport const getQiniuToken: GetQiniuToken = async () => {\r\n  return request.get('/qiniu/token');\r\n};\r\n\r\nexport const getWorkData: GetWorkData = async (workID: string) => {\r\n  return request.get(`/works/${workID}`);\r\n};\r\n\r\nexport const updateWork: UpdateWork = async (workID: string, panoramaTourConfig: PanoramaTourConfig | null) => {\r\n  return request.put('/works', {\r\n    workID,\r\n    panoramaTourConfig: panoramaTourConfig || null,\r\n  });\r\n};\r\n\r\nexport const publishWork: PublishWork = async (workID: string, introduction: string) => {\r\n  return request.post('/published-works', { workID, introduction });\r\n};\r\n\r\nexport const getUserPublishedWorkByWorkID: GetUserPublishedWorkByWorkID = async (workID: string) => {\r\n  return request.get(`/published-works/${workID}`);\r\n};\r\n\r\nexport const getPublishedWorksBeforeArchorDate: GetPublishedWorksBeforeArchorDate = (archorDate: Date) => {\r\n  return request.get<PublishedWork[]>(`/published-works/before/${new Date(archorDate).getTime()}/count/5`);\r\n};\r\n\r\nexport const getUserInformation: GetUserInformation = () => {\r\n  return request.get<User>(`/users/information`);\r\n};\r\n\r\nexport const getPublishedWorksOfGroupMembers: GetPublishedWorksOfGroupMembers = () => {\r\n  return request.get<PublishedWork[]>(`/published-works/group`);\r\n};\r\n\r\nexport const addComment: AddComment = (content: string, commentedPublishedWorkID: string) => {\r\n  return request.post('/comments', {\r\n    content,\r\n    commentedPublishedWorkID,\r\n  });\r\n};\r\n\r\nexport const deleteComment: DeleteComment = (commentID: string) => {\r\n  return request.delete(`/comments/${commentID}`);\r\n};\r\n\r\nexport const getLanguagePackage: GetLanguagePackage = (languageName: LanguageNames) => {\r\n  return request.get(`/languages/${languageName}`);\r\n};\r\n","import { message } from 'antd';\r\nimport { Context, createContext, FC, useEffect, useState } from 'react';\r\nimport { getLanguagePackage } from 'requests/requests';\r\nimport { WebsiteTexts } from './interface';\r\n\r\nexport enum LanguageNames {\r\n  cn = 'cn',\r\n  en = 'en',\r\n}\r\ninterface ILanguageState {\r\n  languageName: LanguageNames;\r\n  languagePackage: WebsiteTexts | null;\r\n  updateLanguagePackage: (languageName: LanguageNames) => Promise<void>;\r\n}\r\n\r\nconst saveLanaugeToLocalStorage = (languageName: LanguageNames) => {\r\n  localStorage.setItem('language', languageName);\r\n};\r\nconst getLanguageFromLocalStorage = () => {\r\n  return (localStorage.getItem('language') as LanguageNames) || LanguageNames.cn;\r\n};\r\n\r\nconst useLanguageState: () => ILanguageState = () => {\r\n  const [languageName, setLanguageName] = useState<LanguageNames>(getLanguageFromLocalStorage());\r\n  const [languagePackage, setLanguagePackage] = useState<WebsiteTexts | null>(null);\r\n  const updateLanguagePackage = async (languageName: LanguageNames) => {\r\n    try {\r\n      setLanguageName(languageName);\r\n      saveLanaugeToLocalStorage(languageName);\r\n      const res = await getLanguagePackage(languageName);\r\n      setLanguagePackage(res.data);\r\n    } catch (err) {\r\n      message.warn(err.response?.data.message);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    updateLanguagePackage(getLanguageFromLocalStorage());\r\n  }, []);\r\n  return { languagePackage, updateLanguagePackage, languageName };\r\n};\r\n\r\nexport const LanguageContext: Context<ILanguageState> = createContext<ILanguageState>({\r\n  languagePackage: null,\r\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n  updateLanguagePackage: async () => {},\r\n  languageName: getLanguageFromLocalStorage(),\r\n});\r\n\r\ninterface Props {\r\n  children?: JSX.Element | JSX.Element[];\r\n}\r\nexport const LanguageWrapper: FC<Props> = ({ children }: Props) => {\r\n  return <LanguageContext.Provider value={useLanguageState()}>{children}</LanguageContext.Provider>;\r\n};\r\n","import { AxiosPromise } from 'axios';\r\nimport { Country, Gender } from 'interface';\r\nimport React, { createContext, useEffect, useState } from 'react';\r\nimport * as requests from '../requests/requests';\r\n\r\ninterface Auth {\r\n  user: requests.User | null;\r\n  authenticated: boolean;\r\n  register: (userName: string, password: string, gender: Gender, country: Country) => AxiosPromise;\r\n  login: (userName: string, password: string) => AxiosPromise<requests.LoginResult>;\r\n  logout: () => Promise<void>;\r\n}\r\ninterface IAuthProviderProps {\r\n  children?: JSX.Element | JSX.Element[];\r\n}\r\ninterface IUseAuth {\r\n  AuthProvider: React.FC<IAuthProviderProps>;\r\n  authContext: React.Context<Auth>;\r\n}\r\n\r\nconst ACCESS_TOKEN = 'access_token';\r\nconst saveAccessTokenToLocalStorage = (access_token: string) => {\r\n  localStorage.setItem(ACCESS_TOKEN, access_token);\r\n};\r\nexport const getAccessTokenFromLocalStorage: () => string = () => {\r\n  return localStorage.getItem(ACCESS_TOKEN) || '';\r\n};\r\n\r\nconst createAuth: () => Auth = () => {\r\n  const [user, setUser] = useState<requests.User | null>(null);\r\n  const [authenticated, setAuthenticated] = useState<boolean>(false);\r\n\r\n  useEffect(() => {\r\n    const access_token: string = getAccessTokenFromLocalStorage();\r\n    if (access_token) {\r\n      setAuthenticated(true);\r\n    }\r\n  }, []);\r\n\r\n  const register: Auth['register'] = async (userName: string, password: string, gender: Gender, country: Country) => {\r\n    return requests.register(userName, password, gender, country);\r\n  };\r\n  const login = async (userName: string, password: string) => {\r\n    try {\r\n      const res = await requests.login(userName, password);\r\n      saveAccessTokenToLocalStorage(res && res.data && res.data.access_token);\r\n      setAuthenticated(true);\r\n      setUser(res.data.user);\r\n      return Promise.resolve(res);\r\n    } catch (err) {\r\n      return Promise.reject(err);\r\n    }\r\n  };\r\n  const logout = async () => {\r\n    saveAccessTokenToLocalStorage('');\r\n    setAuthenticated(false);\r\n  };\r\n  return {\r\n    user,\r\n    authenticated,\r\n    register,\r\n    login,\r\n    logout,\r\n  };\r\n};\r\n\r\nconst authContext = createContext<Auth>({} as Auth);\r\nconst AuthProvider: React.FC<IAuthProviderProps> = ({ children }: IAuthProviderProps) => {\r\n  const auth: Auth = createAuth();\r\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>;\r\n};\r\n\r\nexport const useAuth: () => IUseAuth = () => {\r\n  return {\r\n    authContext,\r\n    AuthProvider,\r\n  };\r\n};\r\n","import { Route, Redirect } from 'react-router';\r\nimport { IHOCRoute } from 'interface';\r\nimport { useAuth } from 'auth/auth';\r\nimport { useContext } from 'react';\r\n\r\nconst PublicRoute: IHOCRoute = ({ ...rest }) => {\r\n  const { authContext } = useAuth();\r\n  const { authenticated } = useContext(authContext);\r\n  if (authenticated) {\r\n    return <Redirect to=\"/\" />;\r\n  } else {\r\n    return <Route {...rest}></Route>;\r\n  }\r\n};\r\n\r\nexport default PublicRoute;\r\n","import { Route, Redirect } from 'react-router-dom';\r\nimport { IHOCRoute } from 'interface';\r\nimport { useAuth } from 'auth/auth';\r\nimport { useContext } from 'react';\r\n\r\nconst ProtectedRoute: IHOCRoute = ({ ...rest }) => {\r\n  const { authContext } = useAuth();\r\n  const { authenticated } = useContext(authContext);\r\n  if (authenticated) {\r\n    return <Route {...rest}></Route>;\r\n  } else {\r\n    return <Redirect to=\"/signin\" />;\r\n  }\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAEjBJREFUeF7tnXnUb9UYx79f8xzLWPIHImMiVmXINVYSJUNECCEUDUIhQ5luhlpELEOsRcO6lSQiLgnLHBka8AfRZIxFhvW1nmu/d733vr/7+53f3vv89j5nP3utd71/vOd59rM/e3/fc84+ez+b8OIEnMAmCdDZOAEnsGkCLhAfHU5gCgEXiA8PJ+AC8THgBOII+B0kjptbNULABdJIR3sz4wi4QOK4uVUjBFwgjXS0NzOOgAskjptbNULABdJIR3sz4wi4QOK4uVUjBFwgjXS0NzOOgAskjptbNULABdJIR3sz4wi4QOK4uVUjBFwgjXS0NzOOgAskjptbNULABdJIR3sz4wi4QOK4uVUjBFwgjXS0NzOOgAskjptbNULABdJIR3sz4wi4QOK4uVUjBFwgjXS0NzOOgAskjptbNULABdJIR3sz4wi4QOK4uVUjBHoRiKQ7AdgcgP1e+rlxI0y9mYshcB2A3wP43dJvkn/IXXUWgUgyMewO4Inhd+443Z8T6ELgGgCnA/g8gLUk/9zFaNo1SQKRtB+ApwLYNTUQt3cCmQnYHeYcAGeR/Gis7yiBSFoF4FAAu8VW7HZOYIEEzgawmuTaeeucSyCS7hKEceC8Ffn1TqACAscFofymayydBSJpJwAnAti6q3O/zglUSOBXAA4neVqX2DoJRNLTAZzcxaFf4wQGQuBokkfOinWmQCS9G8CrZjnyvzuBARI4meTe0bNYkr4I4PEDbLiH7AS6EjiVpD0hTSybvINI+hSAfbrW4tc5gQETOJjkeybFP1Egkt4I4KgBN9hDdwLzEnjBpO8lKwQiye4advfw4gRaI7A3yQ0mozYQiKSbA/g2gPu1Rsbb6wQAXARgB5J/X6KxsUBeB+BoR+UEGiZwBMljVghE0l3D3eMODcPxpjuBq8Jd5NeGYv0dRNJ7ARzkfJyAE8D7SL5yvUAk3R3AZT2A+WN4rvsegGt78O8u2yVgY3bbHt+XtyZ5ybo7iKSXADghI+u3AjiN5IUZfborJ7CCgKTbA3g4gHcBMNHkKoeSPHZJIJ/LtHT9mwD2I3lxrijdjxPoSkDSGgB7dr1+xnW24epRlHRHAFdkcHoSyedm8OMunEA0AUm2NMqWSOUoW5pAXgrgA4neriRpe8+9OIHiBCTZZj575EotLzeB2CaSVyR62pfkJxN9uLkTyEZAku1N3yPR4fEmkFMAPC3B0RqSeyXYu6kTyE5A0kMBXJDo+FQTyNcBPCLB0ZEk/et7AkA3zU9A0k0B/AlASrqp800glwLYKiHE3UhamhUvTqAqApLs+9t2CUFdZgKxD3i3SHCyBUlL4OXFCVRFQNKHAbwwIai/mUCU4AAkZ27bTfHvtk4gloAk29Nke5uiiwskGp0b1k7ABVJ7D3l8RQm4QIri98prJ+ACqb2HPL6iBFwgRfF75bUTcIHU3kMeX1ECLpCi+L3y2gm4QGrvIY+vKAEXSFH8XnntBFwgtfeQx1eUgAukKH6vvHYCLpDae8jjK0rABVIUv1deOwEXSO095PEVJeACKYrfK6+dgAuk9h7y+IoScIEUxe+V107ABVJ7D3l8RQm4QCbgl3R9AJbEbvPwZ9svfwXJ/xbtrZFVPgTOzQtE0p0B7Bp+LDOLicKSGU8qVwMwsVwC4AwA55HMkXJ1ZEN/ZXOGyrlJgUh6UEi0/bjEfF42Es4F8FX7TfIHox/pczRwDJybEoikLcMBPwcCuNEcfd3l0n8BsBSsdnDKb7sYjPWaMXFuQiCSTAwmCjv9ykTSZzFxvM/EQtJE00wZI+fRC0TS9iHzvD1WLbLY49YhJNcustJSdUl6IICPACjB+bUk7VE3exm1QCQ9CcCZ2al1d/gPAPuTHPWZ8ZIsL7MdoHSr7miyX3kYydW5vY5WIJLsOAZ7J6ihHESylliy8pC0C4BzsjqNd3YiyRfHm6+0HKVAJFkibJu6ram8iaSlsRxNkWQpOWtr05dJ2uxkljI6gUj6GIDnZaGT38muJL+Q3+3iPUqySQ+bjKixZDtOY1QCkfRaAMfU2GPLYtqJ5PmVxzg1PEnPBlD7aWB7krSPuUllNAKRtDOAIfx3/iuAVSR/mNRzhYwlrQJgj7B2uEztZUeS304JchQCCfPv3yowxRjL3qaArfMG9Z2kRc5jEUiuE0ljB3yMXS/TkjGBdLXJePJr1ypzXJfEefACCcsa7O7R9xfyHJ213Id9cbe7yCCWpbTKeQwCsbOs7Q4yxLKa5GFDCFxSk5wHLZCwWtTuHrkXHtqL9M8BXAjA9oDcP/xslnkw2zuI3UWqXgXcMuehC+Q1AN6WcdCar1NI/miST0nb2NIRAC/LWOcbSL4lo7/sriQ1y3noAvkigMdnGBE/BbBv1//kkvYEcDwA22yVWs4nuVOqkz7tJTXLebACkWRbYnMcHR29BCTjUostSV7e5yCP9d065yELZB8AqatkLyeZNPsl6SIA940dgMHuRSRtqXh1RVLTnIcskFMBPDVxRD2F5OkpPsIL7PdTfABYQ3KvRB+9mEtqmvOQBWIzTPbSHFveT/LlscbL7STZ+i9bBxZbfkzyAbHGfdpJaprzkAVy1ZTsI13GzANI/rjLhbOukbQtgJS1VVeTvMOsekr8XVLTnAcpkJBP6T8JA+YvJG+dYL/CVNJfEnfU3aC2vFvOGRiqQGx6NWWJxjdI2jbRbEWSrRq1/e+xpbqZrJDLqmnOQxXIgwF8N3YkAjiB5AEJ9pPuIB8KHxFj3T6E5Pdijfuwk9Q8ZxdIppElyQWykuXg/xENVSD+iJVJ2NPc+CPWcN9BLLm0v6T3LBJ/SR+oQGxctD792LM21rtvnfMgH7GCQJr+gLVAgTTNecgCaXoJxAIF0jTnIQuk6UV0CxRI05yHLBBf7r4Alfhyd1nmSMsgGV0oSdHWAEgyxr7ljTwxvGJtWuY82DtIeFFvdito7GCPsfMtt8O9g9hZFJ60IWbUz2HjSRsGKpBwF2kyHc0c4zvLpZ72Jx5jsXeQIBDbMuuJ4+L7r5OlJ47rhGniRUUFEkTiqUfj+6+zpace7YxqgwtrEIgljvPk1XH919nKk1d3RlWXQMJdZHcAn41rwkKthn78geUhszxZQyiPJPn1lEAHPc27ccMlvR3A4SlAFmA7hgN0hvBI+3ySH0/tz1EJJNxJvgHgYalgerIf0xFsqRvEekK8zu0nSGY5hm90AgkiSfqy31PPRWdw7CmeZLeSvgTgscmOMjuIXZkxKYxRCiSIxG6vz83MPtbdmI+BPgLAW2PBZLa7gOTDc/ocrUCCSOw2a6felir/sEQOJFNTpJaKv1O9kvYAkJShslNF0y96B0lbepS1jFogQSSWOf09Bc4vtDM/DiG5NmuPVepM0g4A3l+I81Ekz+oDzegFEkRi30nsXO+DFnBUm+WRsvPDjxvaIZ2pAyx8JxkV5yYEstTxYbmEicQ6MfepVHZa1HEmjqGcO5gqiE3Zj4lzUwJZJhRbBbwbgMcBSM2weC6ArwD4UtcDePoamLX5DauAB825SYEsH0gh99OuAOxnKwCbT0mKfXU4tOcSAGcAOI/kFbUNzBrjGSrn5gUyaTCFfFC2pdfEYsVOsrqituTSNQphnpiGwNkFMk+PVnytJLv73SPcBW8IwI50s5/f2W+S11UcfrWhuUCq7ZrpgYXn+2eEL9n3BHCLGU05DcCHSH55oE0uErYLpAj2+EolmSjsx07ajSmWQf5kAB8neU2Mg5ZsXCAD6e1wRrttL85x7LW12iYaVpP88EAQFAnTBVIE+3yVSnoOgJPms+p89ReCUM7rbNHQhS6Qyjtb0qKW749utXGOrnWB5KDYkw9JNgO1NNXcUy0buHWRbETZBbKIYRdRh6TPha/9EdZJJi6SZfhcIEljqR9jSW8G8Pp+vHfy6iIJmFwgncbL4i6S9OSwjGVxlU6uaQ+SZ5YOonT9LpDSPbDh7fxmAL4GwE6XLV1+CMCyglxbOpCS9btAStJf+UJ4NIDXVRTSu0keUlE8Cw/FBbJw5JMrlLQKwFcrCWd5GLuTtAmDJosLpJJurzVDCABbmrIjyZRThSuhPH8YLpD5mWW3kPRqAO/I7jifQ1uSclg+d8Px5AIp3FeStgXwXQA3KBzKrOp3ITmUlKOz2tL57y6Qzqj6uVDSmoSVuRsHZQsQTWz/BGBZRu6bMervkNw+o79BuHKBFOwmSfvbHo1MIRxI8vjlviTZDNTqTP7NTS+5pzLGl92VCyQ70m4OJd0VgH1r2KybxdSrNpmoWVLu5HmrSNq3miZKLoHYnm3bwx1btiBpPpopkmz5ui1jTy0nkZyaYjVjXRbrt0g+NDXoodhLug+AnybEe60doGNZBB+Y4GQ3kp9PsB+UadgV+JkMQVuSOvuP/stpviTZXnXL8LhFhjrNxVtIviGTr6rdSLJ/BhckBHmJCcQGt6XNiS1HkrSvyKMvkm4D4CcA7pyhsZb3t9OOQEkvBvDBDHUuudie5Hcy+qvSlSTLq7xPQnBrTSAfBfD8BCdrSO6VYD8YU0knAHhJhoA/TfJZ8/iRdAqAp81jM+Xa7JnUM8WVzU14T/wZgJskOP20CSTHGqJ9SX4yIZDqTSXZXTbHo+SV4dHqF/M0WtL9wqPWbeexm3LtESSPyeSrOjeSchwSdKwJJMc6oitJprzoVwd4eUCSrgfg5wAsRU9qOYCk3YnmLpIsL7El185VtiFpj4yjKpIOBnBshkY9i+ZE0lVTUnZ2rWfmjExXR7VdJ8kyktjZfqnlNJJJj0mSbJ/Hk1IDCfZfIfmYTL6qcCPpBQA+kimYWy0J5AMAXprB6TcB7Efy4gy+qnAhyRJkJ522Ghryh/BodVFKwyRtFx61ZiWb61rNwSTtDJZBF0mPtjNdADwhU0POIfmEJYHYS7Zl78tV7Fgv+295YS6HpfxI+n6mg2WyHeUmyRYfvjMjk0dl9LUoV/byfTcAdw9pW+0o8Zxl3eqGJYHY9KUN5rvkrAHAHwHYf0xbdt3n7rY+D/48KgOTM0jGZlOcWL0ky4m1c4bY3MVkAvcgedk6gVjp4QXQwf+fwF/Do5UtTclWwkcw+4Boya695CVgBym90lyuF0gQie2Ks1ktL/kIHEoyx4zKiogkWfYUy6LiJR8Bm7DageSvJwnEThRqdotmPsbrPZ1N8ok9+F3vUpL/U8sLeIPvQxvcQcJdxKbIbKrMSxoBO0ba1lr1uqRDkr1g2zFyXtIJ2Puy3T3+vuRqkkDshd2ebbdJr69pD68huZCtuJJs1vCIpmnnafzeJO14ifVlhUDCXcTm2m3myUscgXNJLmyGKRzhbP/UdowL163sqYmkrUvcoEwUSBCJffG1BXJe5iPw7/BoZR9NF1Yk7QLgnIVVOK6KNvmxdJMCCSI5HMDbx8Wi99a8nqQ98iy8ZFwSs/DYC1Z4Ksmnb6r+qQLxO8nc3VZ0bZOkW4b3RztL3stsAieT3HvaZTMFEkSSY8Xv7HCHf0XxPd8VJdCuvTePJnnkrCA7CSSIxJIy217se89y2ujfJ77klWAhyWbPLKGdl5UEfgXgcJKd1h52FkgQiW01PQDAyzJl9BhLB55I0rbFVlMknZ1xZWs17UoM5LhwpuNvuvqZSyBLTiVtvUwo1+9a2UivO53kU2psmyRbTzT4pewZ2No/C0vBalPhc5UogSwTir0M2gyALZffaq6ax3Fx9Qkrwo5R2/BVw7kli+z168K091mTvm90DSRJIMsrkWRrjiwRwTO7Vj7Q6yyNzGcBnDmkjWGSrG/2HfkS+WsAnB5yB6wl+efUMZZNIBuJxfan2wmv9nvp58apwU6x73M/iFVriRYsycKlJC/vsR29u5Zke37uBcAek2/Xc4V99su/AFjCQjtNeN1vkrZrM2vpRSBZI3RnTqAgARdIQfhedf0EXCD195FHWJCAC6QgfK+6fgIukPr7yCMsSMAFUhC+V10/ARdI/X3kERYk4AIpCN+rrp+AC6T+PvIICxJwgRSE71XXT8AFUn8feYQFCbhACsL3qusn4AKpv488woIEXCAF4XvV9RNwgdTfRx5hQQIukILwver6CbhA6u8jj7AgARdIQfhedf0EXCD195FHWJCAC6QgfK+6fgIukPr7yCMsSMAFUhC+V10/ARdI/X3kERYk4AIpCN+rrp+AC6T+PvIICxJwgRSE71XXT8AFUn8feYQFCbhACsL3qusn8D/Td8kbmzjWGAAAAABJRU5ErkJggg==\"","import { Select } from 'antd';\r\nimport { LanguageContext, LanguageNames } from 'language';\r\n\r\nimport { FC, useContext } from 'react';\r\n\r\ninterface Language {\r\n  name: LanguageNames;\r\n  label: string;\r\n}\r\n\r\nconst { Option } = Select;\r\nconst LanguageSelecter: FC = () => {\r\n  const { updateLanguagePackage, languageName } = useContext(LanguageContext);\r\n  const languages: Language[] = [\r\n    { name: LanguageNames.cn, label: '中文简体' },\r\n    { name: LanguageNames.en, label: 'English' },\r\n  ];\r\n  const language = languages.find((language) => language.name === languageName) || languages[0];\r\n  const handleSelectLanguage = (val: LanguageNames) => {\r\n    updateLanguagePackage(val);\r\n  };\r\n  return (\r\n    <Select defaultValue={language.name} onChange={(val) => handleSelectLanguage(val)} bordered={false}>\r\n      {languages.map((language) => (\r\n        <Option key={language.name} value={language.name}>\r\n          {language.label}\r\n        </Option>\r\n      ))}\r\n    </Select>\r\n  );\r\n};\r\n\r\nexport default LanguageSelecter;\r\n","import React, { useContext } from 'react';\r\n\r\nimport styles from './style.module.css';\r\nimport { Link, useHistory } from 'react-router-dom';\r\n\r\nimport { Container, Grid, Button, TextField } from '@material-ui/core';\r\n\r\nimport Logo from 'assets/logo.png';\r\nimport { showHttpError } from 'requests/requests';\r\nimport { message } from 'antd';\r\nimport { useAuth } from 'auth/auth';\r\nimport LanguageSelecter from 'components/LanguageSelecter';\r\n\r\nconst SignIn: React.FC = () => {\r\n  const { authContext } = useAuth();\r\n  const { login } = useContext(authContext);\r\n  const [userName, setUserName] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n  const history = useHistory();\r\n  const handleClickLogin = async () => {\r\n    try {\r\n      await login(userName, password);\r\n      message.success('登录成功！');\r\n      history.replace('/');\r\n    } catch (err) {\r\n      showHttpError(err);\r\n    }\r\n  };\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <Container maxWidth={false} className={styles.container}>\r\n        <Grid container>\r\n          <Grid item xs={5}>\r\n            <div className={styles.posterWrapper}>\r\n              <img\r\n                src=\"https://images.pexels.com/photos/4145356/pexels-photo-4145356.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260\"\r\n                alt=\"\"\r\n              />\r\n              <p>\r\n                <img src={Logo} alt=\"\" />\r\n                <span>360°</span>\r\n              </p>\r\n            </div>\r\n          </Grid>\r\n          <Grid item xs={7}>\r\n            <div className={styles.formWrapper}>\r\n              <div className={styles.childrenInRight}>\r\n                <LanguageSelecter />\r\n                <span>还没有没有账户？</span>\r\n                <Link to=\"/signup\">\r\n                  <Button variant=\"outlined\">注册</Button>\r\n                </Link>\r\n              </div>\r\n              <div className={styles.titleLine}>\r\n                <h1>欢迎回来</h1>\r\n                <p>登录你的账号</p>\r\n              </div>\r\n              <div className={styles.inputLine}>\r\n                <p>\r\n                  <strong>用户名</strong>\r\n                </p>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  value={userName}\r\n                  InputProps={{ style: { fontSize: 12 } }}\r\n                  InputLabelProps={{ style: { fontSize: 12 } }}\r\n                  onInput={(e: React.ChangeEvent<HTMLInputElement>) => setUserName(e.target.value)}\r\n                  label=\"你的账号\"\r\n                  fullWidth\r\n                  size=\"small\"\r\n                ></TextField>\r\n              </div>\r\n              <div className={styles.inputLine}>\r\n                <p>\r\n                  <strong>密码</strong>\r\n                </p>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  value={password}\r\n                  InputProps={{ style: { fontSize: 12 } }}\r\n                  InputLabelProps={{ style: { fontSize: 12 } }}\r\n                  onInput={(e: React.ChangeEvent<HTMLInputElement>) => setPassword(e.target.value)}\r\n                  label=\"你的密码\"\r\n                  fullWidth\r\n                  type=\"password\"\r\n                  size=\"small\"\r\n                ></TextField>\r\n                <p className={styles.forgetPasswordLink}>\r\n                  <span>忘记密码？</span>\r\n                </p>\r\n              </div>\r\n              <div>\r\n                <Button variant=\"contained\" className={styles.submitButton} onClick={handleClickLogin}>\r\n                  登录\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </Grid>\r\n        </Grid>\r\n      </Container>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignIn;\r\n","import React, { useContext } from 'react';\r\n\r\nimport styles from '../signin/style.module.css';\r\n\r\nimport { Container, Grid, Button, TextField, Radio, FormControlLabel, RadioGroup, Box } from '@material-ui/core';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport Logo from 'assets/logo.png';\r\nimport { useAuth } from 'auth/auth';\r\nimport { message } from 'antd';\r\nimport { showHttpError } from 'requests/requests';\r\nimport { Country, Gender, countries } from 'interface';\r\n\r\nimport { Select } from 'antd';\r\nimport LanguageSelecter from 'components/LanguageSelecter';\r\nimport { LanguageContext } from 'language';\r\n\r\nconst { Option } = Select;\r\n\r\nconst SignUp: React.FC = () => {\r\n  const { languagePackage } = useContext(LanguageContext);\r\n  const [userName, setUserName] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n  const [gender, setGender] = React.useState<Gender>(Gender.Female);\r\n  const [country, setCountry] = React.useState<Country>(Country.China);\r\n\r\n  const { authContext } = useAuth();\r\n  const { register } = useContext(authContext);\r\n\r\n  const renderCountrySelecter = () => {\r\n    const CountryOptions = countries.map((item) => {\r\n      return (\r\n        <Option value={item.value} key={item.value}>\r\n          <img src={item.nationalFlag} style={{ width: '1.4vw', marginRight: '0.3vw' }} />\r\n          <strong>{item.text}</strong>\r\n        </Option>\r\n      );\r\n    });\r\n    return (\r\n      <Select style={{ width: '50%' }} size=\"small\" value={country} onChange={(val: Country) => setCountry(val)}>\r\n        {CountryOptions}\r\n      </Select>\r\n    );\r\n  };\r\n\r\n  const handleClickCreate = async () => {\r\n    if (!userName) {\r\n      message.warn('请输入用户名');\r\n      return;\r\n    }\r\n    if (!password) {\r\n      message.warn('请输入密码');\r\n      return;\r\n    }\r\n    try {\r\n      await register(userName, password, gender, country);\r\n      message.success('注册成功！');\r\n    } catch (err) {\r\n      showHttpError(err, '用户');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <Container maxWidth={false} className={styles.container}>\r\n        <Grid container>\r\n          <Grid item xs={5}>\r\n            <div className={styles.posterWrapper}>\r\n              <img\r\n                src=\"https://images.pexels.com/photos/4145356/pexels-photo-4145356.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260\"\r\n                alt=\"\"\r\n              />\r\n              <p>\r\n                <img src={Logo} alt=\"\" />\r\n                <span>360°</span>\r\n              </p>\r\n            </div>\r\n          </Grid>\r\n          <Grid item xs={7}>\r\n            <div className={styles.formWrapper}>\r\n              <div className={styles.childrenInRight}>\r\n                <LanguageSelecter />\r\n                <span>{languagePackage?.HaveAccountYet}</span>\r\n                <Link to=\"/signin\">\r\n                  <Button variant=\"outlined\">{languagePackage?.Login}</Button>\r\n                </Link>\r\n              </div>\r\n\r\n              <div className={styles.titleLine}>\r\n                <h1>{languagePackage?.WelcomeToPanoramicWorld}</h1>\r\n                <p>{languagePackage?.Register}</p>\r\n              </div>\r\n\r\n              <div className={styles.inputLine}>\r\n                <p>\r\n                  <strong>{languagePackage?.Username}</strong>\r\n                </p>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  InputProps={{ style: { fontSize: 12 } }}\r\n                  InputLabelProps={{ style: { fontSize: 12 } }}\r\n                  label=\"输入一个用户名\"\r\n                  fullWidth\r\n                  value={userName}\r\n                  onInput={(e: React.ChangeEvent<HTMLInputElement>) => setUserName(e.target.value)}\r\n                  size=\"small\"\r\n                ></TextField>\r\n              </div>\r\n\r\n              <div className={styles.inputLine}>\r\n                <p>\r\n                  <strong>{languagePackage?.Password}</strong>\r\n                </p>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  label=\"输入你的密码\"\r\n                  InputProps={{ style: { fontSize: 12 } }}\r\n                  InputLabelProps={{ style: { fontSize: 12 } }}\r\n                  fullWidth\r\n                  value={password}\r\n                  onInput={(e: React.ChangeEvent<HTMLInputElement>) => setPassword(e.target.value)}\r\n                  type=\"password\"\r\n                  size=\"small\"\r\n                ></TextField>\r\n              </div>\r\n\r\n              <div className={styles.inputLine}>\r\n                <p>\r\n                  <strong>{languagePackage?.Country}</strong>\r\n                </p>\r\n                {renderCountrySelecter()}\r\n              </div>\r\n\r\n              <div className={styles.inputLine}>\r\n                <strong>{languagePackage?.Gender}</strong>\r\n                <RadioGroup\r\n                  aria-label=\"gender\"\r\n                  value={gender}\r\n                  onChange={(e: React.ChangeEvent<HTMLInputElement>) => setGender(Number(e.target.value))}\r\n                  style={{ flexDirection: 'row' }}\r\n                >\r\n                  <FormControlLabel\r\n                    value={Gender.Female}\r\n                    control={<Radio size=\"small\" color=\"secondary\" />}\r\n                    label={languagePackage?.Female}\r\n                  />\r\n                  <FormControlLabel\r\n                    value={Gender.Male}\r\n                    control={<Radio size=\"small\" color=\"primary\" />}\r\n                    label={languagePackage?.Male}\r\n                  />\r\n                </RadioGroup>\r\n              </div>\r\n\r\n              <Box marginTop=\"2vh\">\r\n                <Button onClick={() => handleClickCreate()} variant=\"contained\" className={styles.submitButton}>\r\n                  {languagePackage?.CreateRightNow}\r\n                </Button>\r\n              </Box>\r\n            </div>\r\n          </Grid>\r\n        </Grid>\r\n      </Container>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignUp;\r\n","export default \"data:image/png;base64,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\"","import styled from 'styled-components';\r\nimport { Box, Container as MatContainer } from '@material-ui/core';\r\n\r\nexport const Wrapper = styled(Box)`\r\n  width: 100vw;\r\n  height: 100vh;\r\n  background-color: #dee1e7;\r\n\r\n  display: grid;\r\n  grid-template-columns: calc(100vw - 30px);\r\n  grid-template-rows: calc(100vh - 30px);\r\n  justify-content: center;\r\n  align-content: center;\r\n`;\r\n\r\nexport const Container = styled(MatContainer)`\r\n  box-sizing: border-box;\r\n  border-radius: 20px;\r\n  overflow: hidden;\r\n  padding: 0px !important;\r\n  background-color: white;\r\n\r\n  display: grid !important;\r\n  grid-template-columns: 5.5vw calc(100% - 5.5vw);\r\n  grid-template-rows: 5.5vw calc(100% - 5.5vw);\r\n`;\r\n\r\nexport const LogoBox = styled(Box)`\r\n  border-right: 1px solid #dee1e7;\r\n  border-bottom: 1px solid #dee1e7;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nexport const Logo = styled.img`\r\n  width: 40%;\r\n`;\r\n\r\nexport const HeaderBox = styled(Box)`\r\n  border-bottom: 1px solid #dee1e7;\r\n  padding: 16px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport const MenuBox = styled(Box)`\r\n  border-right: 1px solid #dee1e7;\r\n  border-bottom: 1px solid #dee1e7;\r\n  padding: 10px;\r\n\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\n\r\nexport const ContentBox = styled(Box)`\r\n  padding: 20px;\r\n  border-bottom: 1px solid #dee1e7;\r\n`;\r\n","import { Box } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\n\r\nexport const MenuItem = styled(Box)`\r\n  border-radius: 15%;\r\n  margin-top: 2vh;\r\n  width: 3vw;\r\n  height: 3vw;\r\n  transition: 0.3s;\r\n  background-color: #f1619b;\r\n  cursor: pointer;\r\n\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\nexport const MenuIcon = styled.i`\r\n  color: white;\r\n  font-size: 1.3vw;\r\n  transition: 0.3s;\r\n`;\r\n","import React from 'react';\r\nimport { useLocation } from 'react-router';\r\nimport { MenuItem, MenuIcon } from 'pages/home/menu-module/styled';\r\n\r\ninterface MenuItem {\r\n  iconClass: string;\r\n  pathname: string;\r\n}\r\n\r\ninterface Props {\r\n  /** callback function when user click a menu */\r\n  onClickMenuItem: (index: string) => void;\r\n}\r\nconst menuConfig: MenuItem[] = [\r\n  {\r\n    pathname: '/dashboard/works',\r\n    iconClass: 'icon-kaifataojian',\r\n  },\r\n  {\r\n    pathname: '/dashboard/exhibition',\r\n    iconClass: 'icon-VR',\r\n  },\r\n  {\r\n    pathname: '/dashboard/friends',\r\n    iconClass: 'icon-haoyou1',\r\n  },\r\n];\r\nconst Menu: React.FC<Props> = ({ onClickMenuItem }: Props) => {\r\n  const { pathname } = useLocation();\r\n  const handleClickMenuItem = (path: string) => {\r\n    onClickMenuItem(path);\r\n  };\r\n  const renderMenu: () => React.ReactNode[] = () => {\r\n    return menuConfig.map((item) => {\r\n      const activated = item.pathname === pathname;\r\n      return (\r\n        <MenuItem\r\n          key={item.iconClass}\r\n          style={{ backgroundColor: activated ? '#F1619B' : 'transparent' }}\r\n          onClick={() => handleClickMenuItem(item.pathname)}\r\n        >\r\n          <MenuIcon className={`iconfont ${item.iconClass}`} style={{ color: activated ? 'white' : 'gray' }}></MenuIcon>\r\n        </MenuItem>\r\n      );\r\n    });\r\n  };\r\n  return <>{renderMenu()}</>;\r\n};\r\n\r\nexport default Menu;\r\n","import { useEffect, useState } from 'react';\r\nimport { getUserInformation, User } from 'requests/requests';\r\nlet localUser: User | undefined = undefined;\r\nconst useUser: () => User | undefined = () => {\r\n  const [user, setUser] = useState<User | undefined>(localUser);\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      try {\r\n        const res = await getUserInformation();\r\n        if (res && res.data) {\r\n          setUser(res.data);\r\n          localUser = res.data;\r\n        }\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n    if (!localUser) {\r\n      fetchUser();\r\n    }\r\n  }, []);\r\n  return user;\r\n};\r\n\r\nexport default useUser;\r\n","import React from 'react';\r\nimport { useRouteMatch, useHistory } from 'react-router-dom';\r\nimport VR from 'assets/VR.png';\r\n\r\nimport { Wrapper, Container, LogoBox, Logo, HeaderBox, MenuBox, ContentBox } from 'layouts';\r\nimport Menu from 'pages/home/menu-module/index';\r\nimport { renderRoutes } from 'routes/index';\r\nimport { Box, Button } from '@material-ui/core';\r\nimport { useAuth } from 'auth/auth';\r\nimport useUser from 'hooks/useUser';\r\n\r\nconst Home: React.FC = () => {\r\n  const { authContext } = useAuth();\r\n  const { logout } = React.useContext(authContext);\r\n  const user = useUser();\r\n  const history = useHistory();\r\n  const handleClickMenuItem = (path: string) => {\r\n    history.push(path);\r\n  };\r\n  const handleClickLogOut: () => void = () => {\r\n    logout();\r\n    window.location.reload();\r\n  };\r\n  const { path } = useRouteMatch();\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Container maxWidth={false}>\r\n        <LogoBox>\r\n          <Logo src={VR} />\r\n        </LogoBox>\r\n        <HeaderBox>\r\n          <h2>欢迎来到全景漫游世界</h2>\r\n          <Box>\r\n            <span style={{ fontWeight: 'bolder', fontSize: '1vw', marginRight: '1vw' }}>{user?.userName}</span>\r\n            <Button onClick={handleClickLogOut}>退出</Button>\r\n          </Box>\r\n        </HeaderBox>\r\n        <MenuBox>\r\n          <Menu onClickMenuItem={handleClickMenuItem} />\r\n        </MenuBox>\r\n        <ContentBox>{renderRoutes(path)}</ContentBox>\r\n      </Container>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React from 'react';\r\n\r\ninterface Props {\r\n  color?: string;\r\n  fontSize?: string;\r\n  name: string;\r\n  [key: string]: unknown;\r\n}\r\n\r\nconst Iconfont: React.FC<Props> = ({ name, color, fontSize, ...rest }: Props) => {\r\n  return (\r\n    <i className={`iconfont ${name}`} {...rest} style={{ color, fontSize, cursor: 'pointer', borderRadius: '50%' }}></i>\r\n  );\r\n};\r\n\r\nexport default Iconfont;\r\n","import { Box } from '@material-ui/core';\r\nimport { message } from 'antd';\r\nimport React from 'react';\r\nimport { addComment, deleteComment, getPublishedWorksOfGroupMembers, PublishedWork } from 'requests/requests';\r\n\r\nimport PublishedWorkList from '../components/publishedWork.list';\r\ninterface IFriendsContext {\r\n  commentable: boolean;\r\n  handleComment?: (commentContent: string, commentedPublishedWorkID: string) => Promise<void>;\r\n  handleDeleteComment?: (commentID: string) => Promise<void>;\r\n}\r\nexport const friendsContext = React.createContext<IFriendsContext>({ commentable: false });\r\n\r\nconst Friends: React.FC = () => {\r\n  const [loadData, setLoadData] = React.useState<number>(0);\r\n  const [publishedWorksOfGroupMembers, setPublishedWorksOfGroupMembers] = React.useState<PublishedWork[]>([]);\r\n  const handleComment = async (commentContent: string, commentedPublishedWorkID: string) => {\r\n    try {\r\n      await addComment(commentContent, commentedPublishedWorkID);\r\n      message.success('评论成功！');\r\n      setLoadData(loadData + 1);\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    } catch (err: any) {\r\n      message.error(err.response?.data.message);\r\n    }\r\n  };\r\n  const handleDeleteComment = async (commentID: string) => {\r\n    try {\r\n      await deleteComment(commentID);\r\n      message.success('删除成功！');\r\n      setLoadData(loadData + 1);\r\n    } catch (err) {\r\n      message.error(err.response?.data.message);\r\n    }\r\n  };\r\n  React.useEffect(() => {\r\n    const fetchPublishedWorksOfGroupMembers = async () => {\r\n      try {\r\n        const res = await getPublishedWorksOfGroupMembers();\r\n        if (res && res.data) {\r\n          setPublishedWorksOfGroupMembers(res.data);\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      } catch (err: any) {\r\n        message.error(err.response?.data.message);\r\n      }\r\n    };\r\n    fetchPublishedWorksOfGroupMembers();\r\n  }, [loadData]);\r\n  return (\r\n    <Box width=\"60%\" padding=\"1vw\" maxHeight=\"80vh\" overflow=\"auto\">\r\n      <friendsContext.Provider value={{ commentable: true, handleComment, handleDeleteComment }}>\r\n        <PublishedWorkList publishedWorks={publishedWorksOfGroupMembers} />\r\n      </friendsContext.Provider>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Friends;\r\n","import { CardHeader, CardContent, Card, Typography, IconButton } from '@material-ui/core';\r\nimport { Delete as DeleteIcon } from '@material-ui/icons';\r\n\r\nimport useUser from 'hooks/useUser';\r\nimport { Gender, getCountryData } from 'interface';\r\nimport { FC, useContext } from 'react';\r\nimport { Comment as IComment } from 'requests/requests';\r\nimport { friendsContext } from '../friends/index';\r\nimport classes from './classes.module.css';\r\ninterface Props {\r\n  comment: IComment;\r\n}\r\nconst Comment: FC<Props> = ({ comment }: Props) => {\r\n  if (!comment._id) return <></>;\r\n  const { handleDeleteComment, commentable } = useContext(friendsContext);\r\n\r\n  const user = useUser();\r\n  const avatar =\r\n    comment.publisher.gender === Gender.Female ? 'http://icetnnu.ltd/female.png' : 'http://icetnnu.ltd/male.png';\r\n  const countryData = getCountryData(comment.publisher.country);\r\n  const cardHeaderActionComponent = (commentable && user && user.userName === comment.publisher.userName && (\r\n    <IconButton aria-label=\"settings\" onClick={() => handleDeleteComment && handleDeleteComment(comment._id)}>\r\n      <DeleteIcon />\r\n    </IconButton>\r\n  )) || <></>;\r\n  return (\r\n    <Card className={classes.comment}>\r\n      <CardHeader\r\n        className={classes.commentHeader}\r\n        avatar={<img src={avatar} className={classes.avatar} />}\r\n        title={<strong>{comment.publisher.userName}</strong>}\r\n        action={cardHeaderActionComponent}\r\n        subheader={<img src={countryData?.nationalFlag} className={classes.nationalFlag} />}\r\n      />\r\n      <CardContent>\r\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n          {comment.content}\r\n        </Typography>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default Comment;\r\n","import { Box } from '@material-ui/core';\r\nimport { FC } from 'react';\r\nimport { Comment as IComment } from 'requests/requests';\r\nimport Comment from './comment';\r\ninterface Props {\r\n  comments: IComment[];\r\n}\r\nconst Comments: FC<Props> = ({ comments }: Props) => {\r\n  const commentsDatas = comments.filter((comment) => Boolean(comment._id));\r\n  const renderComments = () => {\r\n    return commentsDatas.map((comment) => <Comment comment={comment} key={comment._id} />);\r\n  };\r\n  return (\r\n    <Box>\r\n      <h3>\r\n        <strong>评论</strong>\r\n      </h3>\r\n      <Box>{renderComments()}</Box>\r\n      {commentsDatas.length === 0 && <p style={{ color: 'gray' }}>暂无评论</p>}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Comments;\r\n","import { Avatar, Box, Tooltip, Card, CardActions } from '@material-ui/core';\r\nimport { Input } from 'antd';\r\nimport Iconfont from 'components/Iconfont';\r\nimport { getAvatorOfGender, getCountryData } from 'interface';\r\nimport { FC, useContext } from 'react';\r\nimport { PublishedWork } from 'requests/requests';\r\nimport classes from './classes.module.css';\r\nimport Comments from './comments';\r\nimport { friendsContext } from '../friends/index';\r\ninterface Props {\r\n  publishedWork: PublishedWork;\r\n}\r\nconst PublishedWorkItem: FC<Props> = ({ publishedWork }: Props) => {\r\n  const { commentable, handleComment } = useContext(friendsContext);\r\n  const { author, work, introduction, comments } = publishedWork;\r\n\r\n  const firstScene = work.panoramaTourConfig.default.firstScene;\r\n  const workPoster =\r\n    work.panoramaTourConfig.scenes[firstScene].panorama ||\r\n    'http://icetnnu.ltd/u%3D861387783%2C2279533978%26fm%3D26%26fmt%3Dauto%26gp%3D0.webp';\r\n  const userCountryData = getCountryData(author.country);\r\n  const avatorOfGender = getAvatorOfGender(author.gender);\r\n  const handleClickPlay = () => {\r\n    window.open(`/play/${work._id}`);\r\n  };\r\n  return (\r\n    <Box width=\"100%\" marginBottom=\"2vh\" padding=\"10px\" borderRadius=\"5px\" boxShadow=\"0 0 6px gray\">\r\n      <Box display=\"flex\" alignItems=\"center\">\r\n        <Avatar alt=\"female avatar\" src={avatorOfGender} />\r\n        <Box marginLeft=\"0.5vw\">\r\n          <p style={{ fontWeight: 'bold', margin: '0' }}>{author.userName}</p>\r\n          <p style={{ margin: '0' }}>\r\n            <span style={{ color: 'gray', marginRight: '0.3vw' }}>{userCountryData?.text}</span>\r\n            <img style={{ width: '1.2vw' }} src={userCountryData?.nationalFlag} alt={userCountryData?.text} />\r\n          </p>\r\n        </Box>\r\n      </Box>\r\n      <Box marginTop=\"1vh\" fontSize=\"1vw\" color=\"#333\">\r\n        <p>{introduction}</p>\r\n      </Box>\r\n      <Box marginTop=\"2vh\" className={classes.imageWrapper} width=\"30%\" position=\"relative\">\r\n        <Box position=\"absolute\" className={classes.backDrop} width=\"100%\" height=\"100%\" bgcolor=\"rgba(0,0,0,0.7)\">\r\n          <Tooltip title=\"观看\" placement=\"top\" arrow={true}>\r\n            <Box onClick={handleClickPlay}>\r\n              <Iconfont name=\"icon-70BasicIcons-all-64\" color=\"#37daf6\" fontSize=\"1.6vw\" />\r\n            </Box>\r\n          </Tooltip>\r\n        </Box>\r\n        <img style={{ width: '100%', borderRadius: '5px' }} alt=\"panorama work\" src={workPoster} />\r\n      </Box>\r\n      <Box marginTop=\"2vh\">\r\n        <Comments comments={comments || []} />\r\n        {commentable && (\r\n          <Card>\r\n            <CardActions>\r\n              <Box width=\"60%\">\r\n                <Input.Search\r\n                  placeholder=\"在此输入评论\"\r\n                  onSearch={(content) => {\r\n                    if (handleComment) {\r\n                      handleComment(content, publishedWork._id);\r\n                    }\r\n                  }}\r\n                  enterButton=\"发布\"\r\n                />\r\n              </Box>\r\n            </CardActions>\r\n          </Card>\r\n        )}\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\nexport default PublishedWorkItem;\r\n","import { Box } from '@material-ui/core';\r\nimport { Empty } from 'antd';\r\nimport { FC } from 'react';\r\nimport { PublishedWork } from 'requests/requests';\r\nimport PublishedWorkItem from './publishedWork.item';\r\n\r\ninterface Props {\r\n  publishedWorks: PublishedWork[];\r\n}\r\n\r\nconst PublishedWorkList: FC<Props> = ({ publishedWorks }: Props) => {\r\n  const renderPublishedWork = () => {\r\n    return publishedWorks.map((publishedWork, index) => {\r\n      return <PublishedWorkItem key={index} publishedWork={publishedWork} />;\r\n    });\r\n  };\r\n  return (\r\n    <Box width=\"100%\">\r\n      {renderPublishedWork()}\r\n      {publishedWorks.length === 0 && <Empty description={<span style={{ color: 'gray' }}>暂无数据</span>} />}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default PublishedWorkList;\r\n","import { Box, Button } from '@material-ui/core';\r\nimport { message } from 'antd';\r\nimport { useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport { FC } from 'react';\r\nimport { getPublishedWorksBeforeArchorDate, PublishedWork } from 'requests/requests';\r\nimport PublishedWorkList from '../components/publishedWork.list';\r\n\r\nconst Exhibition: FC = () => {\r\n  const [archorDate, setArchorDate] = useState<Date>(new Date());\r\n  const [publishedWorks, setPublishedWorks] = useState<PublishedWork[]>([]);\r\n  const handleClickLoadMore = () => {\r\n    const earliestPublishedWork = publishedWorks[publishedWorks.length - 1];\r\n    if (earliestPublishedWork) {\r\n      setArchorDate(earliestPublishedWork.createdTime);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    const fetchPublishedWorksBeforeArchorDate = async () => {\r\n      try {\r\n        const res = await getPublishedWorksBeforeArchorDate(archorDate);\r\n        if (res && res.data) {\r\n          const newPublishedWorks = [...publishedWorks, ...res.data];\r\n          setPublishedWorks(newPublishedWorks);\r\n          if (res.data.length === 0) {\r\n            message.warn('没有更多数据了');\r\n          }\r\n        }\r\n      } catch (err) {\r\n        message.error(err.response?.data.message);\r\n      }\r\n    };\r\n    fetchPublishedWorksBeforeArchorDate();\r\n  }, [archorDate]);\r\n  return (\r\n    <Box width=\"60%\" padding=\"1vw\" maxHeight=\"80vh\" overflow=\"auto\">\r\n      <PublishedWorkList publishedWorks={publishedWorks} />\r\n      <Box marginLeft=\"30%\">\r\n        {Array.isArray(publishedWorks) && publishedWorks.length > 0 && (\r\n          <Button variant=\"contained\" onClick={handleClickLoadMore}>\r\n            加载更多\r\n          </Button>\r\n        )}\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Exhibition;\r\n","import styled from 'styled-components';\r\n\r\nimport { Box } from '@material-ui/core';\r\n\r\nexport const Wrapper = styled(Box)`\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  display: grid;\r\n  grid-template-columns: 100%;\r\n  grid-template-rows: 10% 90%;\r\n`;\r\n\r\nexport const OperationWrapper = styled(Box)`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nexport const WorksWrapper = styled(Box)`\r\n  display: grid;\r\n  grid-auto-columns: 100%;\r\n  grid-template-rows: 10% auto;\r\n`;\r\n\r\nexport const WorksTitle = styled.h2``;\r\n\r\nexport const WorksBox = styled.ul`\r\n  list-style: none;\r\n`;\r\n\r\nexport const IconFont = styled.i`\r\n  cursor: pointer;\r\n  margin-bottom: 10px;\r\n  font-size: 1.5vw;\r\n  display: none;\r\n`;\r\n\r\nexport const WorkItem = styled.li`\r\n  margin-bottom: 15px;\r\n  width: 20vw;\r\n  height: 8vh;\r\n  display: grid;\r\n  grid-template-columns: 5vw 10vw 3vw;\r\n  grid-template-rows: 100%;\r\n  gap: 1vw;\r\n  &:hover ${IconFont} {\r\n    display: inline;\r\n  }\r\n`;\r\n\r\nexport const WorkThumbnail = styled.img`\r\n  border-radius: 5px;\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\n","import React from 'react';\r\nimport {\r\n  TextField,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogContentText,\r\n  DialogTitle,\r\n} from '@material-ui/core';\r\nimport { OperationWrapper } from '../styled';\r\nimport { message } from 'antd';\r\ninterface Props {\r\n  onConfirm: (workName: string) => void;\r\n}\r\nconst Operation: React.FC<Props> = ({ onConfirm }: Props) => {\r\n  const [showDialog, setShowDialog] = React.useState<boolean>(false);\r\n  const [workName, setWorkName] = React.useState<string>('');\r\n  const handleClickCreate = () => {\r\n    setShowDialog(true);\r\n  };\r\n  React.useEffect(() => {\r\n    setWorkName('');\r\n  }, [showDialog]);\r\n  const handleClickConfirm = () => {\r\n    if (!workName.trim()) {\r\n      message.warn('请输入一个作品名');\r\n      return;\r\n    }\r\n    onConfirm(workName);\r\n    setShowDialog(false);\r\n  };\r\n  const handleClickCancel = () => {\r\n    setShowDialog(false);\r\n  };\r\n  return (\r\n    <OperationWrapper>\r\n      <Button variant=\"contained\" color=\"primary\" size=\"large\" onClick={handleClickCreate}>\r\n        创建全景漫游\r\n      </Button>\r\n      <Dialog open={showDialog}>\r\n        <DialogTitle>创建作品</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>请为该作品起个名字</DialogContentText>\r\n          <TextField\r\n            type=\"text\"\r\n            value={workName}\r\n            onInput={(e: React.ChangeEvent<HTMLInputElement>) => setWorkName(e.target.value)}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button color=\"primary\" onClick={handleClickCancel}>\r\n            取消\r\n          </Button>\r\n          <Button color=\"primary\" onClick={handleClickConfirm}>\r\n            创建\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </OperationWrapper>\r\n  );\r\n};\r\n\r\nexport default Operation;\r\n","/* eslint-disable react/jsx-no-target-blank */\r\nimport React from 'react';\r\nimport { Box } from '@material-ui/core';\r\nimport { WorksWrapper, WorkItem, WorksBox, WorkThumbnail, WorksTitle, IconFont } from '../styled';\r\nimport { Work } from 'requests/requests';\r\nimport { Empty } from 'antd';\r\ntype Props = {\r\n  works: Work[];\r\n};\r\nconst Works: React.FC<Props> = ({ works }: Props) => {\r\n  const imagePlaceholder = `http://icetnnu.ltd/u%3D861387783%2C2279533978%26fm%3D26%26fmt%3Dauto%26gp%3D0.webp`;\r\n  const renderWorkItems = () => {\r\n    return works.map((work) => {\r\n      const firstScene = work.panoramaTourConfig?.default.firstScene;\r\n      const firstSceneImage = work.panoramaTourConfig?.scenes[firstScene].panorama;\r\n      return (\r\n        <WorkItem key={work.workName}>\r\n          <Box>\r\n            <WorkThumbnail src={firstSceneImage || imagePlaceholder} />\r\n          </Box>\r\n          <Box color=\"#333\" fontWeight=\"bold\">\r\n            {work.workName}\r\n          </Box>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <a href={`/studio/${work._id}`} target=\"_blank\">\r\n              <IconFont style={{ color: '#1296db' }} className=\"iconfont icon-bianji\"></IconFont>\r\n            </a>\r\n            {work.panoramaTourConfig && (\r\n              <a href={`/play/${work._id}`} target=\"_blank\">\r\n                <IconFont style={{ color: '#d4237a' }} className=\"iconfont icon-yulan\"></IconFont>\r\n              </a>\r\n            )}\r\n          </Box>\r\n        </WorkItem>\r\n      );\r\n    });\r\n  };\r\n  return (\r\n    <WorksWrapper>\r\n      <WorksTitle>我的所有作品</WorksTitle>\r\n      <WorksBox>{renderWorkItems()}</WorksBox>\r\n      {works.length === 0 && <Empty description={<span style={{ color: 'gray' }}>您还没有创建过作品</span>} />}\r\n    </WorksWrapper>\r\n  );\r\n};\r\n\r\nexport default Works;\r\n","import { IRoute } from 'routes';\r\nimport Exhibition from './contents-module/exhibition';\r\nimport Friends from './contents-module/friends';\r\nimport Works from './contents-module/works';\r\n\r\nconst routes: IRoute[] = [\r\n  {\r\n    path: '/',\r\n    exact: true,\r\n    redirect: {\r\n      target: '/works',\r\n    },\r\n  },\r\n  {\r\n    path: '/works',\r\n    component: Works,\r\n  },\r\n  {\r\n    path: '/exhibition',\r\n    component: Exhibition,\r\n  },\r\n  {\r\n    path: '/friends',\r\n    component: Friends,\r\n  },\r\n];\r\n\r\nexport default routes;\r\n","import React from 'react';\r\nimport { Wrapper } from './styled';\r\nimport Operation from './components/Operation';\r\nimport Works from './components/Works';\r\n\r\nimport { createWork, getUserWorks, showHttpError, Work } from 'requests/requests';\r\nimport { message } from 'antd';\r\nconst Studio: React.FC = () => {\r\n  const [load, setLoad] = React.useState<number>(1);\r\n  const [works, setWorks] = React.useState<Work[]>([]);\r\n  React.useEffect(() => {\r\n    const fetchData = async () => {\r\n      const res = await getUserWorks();\r\n      if (res && res.data) {\r\n        setWorks(res.data);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [load]);\r\n  const handleConfirmCreate = async (workName: string) => {\r\n    try {\r\n      await createWork(workName);\r\n      message.success('创建成功!');\r\n      setLoad(load + 1);\r\n    } catch (err) {\r\n      showHttpError(err, '该作品');\r\n    }\r\n  };\r\n  return (\r\n    <Wrapper>\r\n      <Operation onConfirm={(workName: string) => handleConfirmCreate(workName)} />\r\n      <Works works={works} />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Studio;\r\n","import { ToolNames } from 'interface';\r\nimport { HotSpot, IPanoramaImage } from 'pages/studio/state/state';\r\nimport { PanoramaTourConfig } from 'requests/requests';\r\n\r\ninterface AnyObject {\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  [key: string]: any;\r\n}\r\n\r\nexport const generateUniqueId: () => string = () => {\r\n  const uniqueID = String(Math.ceil(Date.now() * Math.random()));\r\n  return uniqueID;\r\n};\r\n\r\nexport const importPanoramaTourConfig: (panoramaTourConfig: PanoramaTourConfig | null) => IPanoramaImage[] = (\r\n  panoramaTourConfig: PanoramaTourConfig | null,\r\n) => {\r\n  if (panoramaTourConfig === null) {\r\n    return [];\r\n  }\r\n  const panoramaImages: IPanoramaImage[] = [];\r\n  const scenes = panoramaTourConfig.scenes;\r\n  const sceneIDs = Object.keys(scenes);\r\n  for (const sceneID in scenes) {\r\n    const scene = scenes[sceneID];\r\n    const sceneHotSPots = scene.hotSpots;\r\n    const hotSpotsDev: HotSpot[] = [];\r\n    for (const hotSpotProd of sceneHotSPots) {\r\n      const hotSpotDev: HotSpot = {\r\n        id: generateUniqueId(),\r\n        yaw: hotSpotProd.yaw,\r\n        pitch: hotSpotProd.pitch,\r\n        text: hotSpotProd.text,\r\n        type: hotSpotProd.type,\r\n        fontContent: hotSpotProd.fontContent,\r\n        toolName: hotSpotProd.toolName,\r\n        targetID: hotSpotProd.sceneId,\r\n        activated: false,\r\n      };\r\n      hotSpotsDev.push(hotSpotDev);\r\n    }\r\n\r\n    panoramaImages.push({\r\n      url: scene.panorama,\r\n      id: sceneID,\r\n      yaw: scene.yaw,\r\n      pitch: scene.pitch,\r\n      hotSpots: hotSpotsDev,\r\n      isEntry: sceneID === sceneIDs[0],\r\n      activated: sceneID === sceneIDs[0],\r\n    });\r\n  }\r\n  return panoramaImages;\r\n};\r\n\r\nexport const exportPanoramaTourConfig = (panoramaImages: IPanoramaImage[]): PanoramaTourConfig | null => {\r\n  if (panoramaImages.length === 0) return null;\r\n  const scenes: AnyObject = {};\r\n  for (const item of panoramaImages) {\r\n    const hotSpotsOfItem = [];\r\n    for (const hotSpot of item.hotSpots) {\r\n      const newHotSpot: AnyObject = {};\r\n      newHotSpot.yaw = hotSpot.yaw;\r\n      newHotSpot.pitch = hotSpot.pitch;\r\n      newHotSpot.toolName = hotSpot.toolName;\r\n      newHotSpot.type = hotSpot.toolName === ToolNames.Link ? 'scene' : 'info';\r\n      newHotSpot.text = hotSpot.text;\r\n      newHotSpot.fontContent = hotSpot.fontContent || '';\r\n      if (hotSpot.toolName === ToolNames.Link) {\r\n        if (panoramaImages.findIndex((image) => image.id === hotSpot.targetID) !== -1) {\r\n          newHotSpot.sceneId = hotSpot.targetID;\r\n        }\r\n      }\r\n      hotSpotsOfItem.push(newHotSpot);\r\n    }\r\n\r\n    scenes[item.id] = {\r\n      autoLoad: true,\r\n      type: 'equirectangular',\r\n      panorama: item.url,\r\n      yaw: item.yaw || 0,\r\n      pitch: item.pitch || 0,\r\n      hotSpots: hotSpotsOfItem,\r\n    };\r\n  }\r\n  const config: AnyObject = {\r\n    default: {\r\n      firstScene: panoramaImages[0].id,\r\n    },\r\n    scenes: scenes,\r\n  };\r\n  return config as PanoramaTourConfig;\r\n};\r\n","import { ICreateTooltipFunc } from 'types/pannellum/interface';\r\nimport classes from './classes.module.css';\r\nimport LinkIcon from 'assets/link.png';\r\nimport TipIcon from 'assets/tip.png';\r\nimport { ToolNames } from 'interface';\r\nimport { HotSpot } from '../state/state';\r\n\r\nconst ToolIcons: Map<ToolNames, string> = new Map();\r\nToolIcons.set(ToolNames.Link, LinkIcon);\r\nToolIcons.set(ToolNames.Tip, TipIcon);\r\n\r\nconst createTooltip = (hotSpotDiv: HTMLDivElement, hotSpot: HotSpot): void => {\r\n  const toolName = hotSpot.toolName;\r\n\r\n  const tipSpan: HTMLSpanElement = document.createElement('span');\r\n  tipSpan.innerHTML = hotSpot.text || '';\r\n  hotSpotDiv.draggable = false;\r\n  hotSpotDiv.classList.add(classes.hotSpot);\r\n  switch (toolName) {\r\n    case ToolNames.Link:\r\n    case ToolNames.Tip:\r\n      const ToolIcon = ToolIcons.get(toolName) || '';\r\n      const iconImage: HTMLImageElement = document.createElement('img');\r\n      const tag: HTMLSpanElement = document.createElement('p');\r\n      tag.classList.add(classes.tag);\r\n      tag.innerHTML = hotSpot.fontContent || '';\r\n\r\n      iconImage.src = ToolIcon;\r\n      iconImage.draggable = false;\r\n      hotSpotDiv.classList.add(classes.iconHotSpot);\r\n      hotSpotDiv.appendChild(iconImage);\r\n      hotSpotDiv.appendChild(tag);\r\n      break;\r\n    case ToolNames.Font:\r\n      const fontTag: HTMLParagraphElement = document.createElement('p');\r\n      fontTag.draggable = false;\r\n      fontTag.innerHTML = hotSpot.fontContent || '';\r\n      hotSpotDiv.classList.add(classes.fontHotSpot);\r\n      fontTag.classList.add(classes.fontTag);\r\n      hotSpotDiv.appendChild(fontTag);\r\n      break;\r\n  }\r\n\r\n  hotSpotDiv.appendChild(tipSpan);\r\n};\r\n\r\nexport const createTooltipInProd = (hotSpot: HotSpot) => {\r\n  return (hotSpotDiv: HTMLDivElement): void => {\r\n    createTooltip(hotSpotDiv, hotSpot);\r\n  };\r\n};\r\nexport const createTooltipInDev: (\r\n  toolName: ToolNames,\r\n  hotSpot: HotSpot,\r\n  cb?: (div: HTMLDivElement) => void,\r\n) => ICreateTooltipFunc = (_toolName: ToolNames, hotSpot: HotSpot, cb?: (div: HTMLDivElement) => void) => {\r\n  return (hotSpotDiv: HTMLDivElement) => {\r\n    createTooltip(hotSpotDiv, hotSpot);\r\n    hotSpot.activated && hotSpotDiv.classList.add(classes.activatedHotSpot);\r\n\r\n    // run callback function\r\n    cb && cb(hotSpotDiv);\r\n  };\r\n};\r\n","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import React, { useEffect, useState } from 'react';\r\nimport { useRouteMatch } from 'react-router-dom';\r\nimport { updateWork, Work } from 'requests/requests';\r\nimport { IHotSpot } from 'types/pannellum/interface';\r\nimport { exportPanoramaTourConfig, generateUniqueId } from 'utils';\r\nimport { createTooltipInDev } from '../components/HotSpot';\r\nimport { AxiosPromise } from 'axios';\r\nimport { StudioPageParams } from 'routes/config';\r\nexport interface HotSpot extends IHotSpot {\r\n  activated?: boolean;\r\n}\r\nexport interface IPanoramaImage {\r\n  url: string;\r\n  id: string;\r\n  hotSpots: HotSpot[];\r\n  isEntry: boolean;\r\n  activated: boolean;\r\n  yaw?: number;\r\n  pitch?: number;\r\n}\r\n\r\ninterface IAddImage {\r\n  (url: string): void;\r\n}\r\ninterface IInitPanoramaImages {\r\n  (panoramaImages: IPanoramaImage[]): void;\r\n}\r\ninterface ISwitchImage {\r\n  (imageID: string): void;\r\n}\r\ninterface IRemoveImage {\r\n  (imageID: string): void;\r\n}\r\ninterface IAddHotSpot {\r\n  (newHotSpot: HotSpot): void;\r\n}\r\ninterface ISwitchHotSpot {\r\n  (targetID: string): void;\r\n}\r\ninterface IDeSelectAllHotSpots {\r\n  (): void;\r\n}\r\ninterface IUpdateActivatedHotSpot {\r\n  (hotSpot: HotSpot): void;\r\n}\r\ninterface IRemoveActivatedHotSpot {\r\n  (hotSpotID: string): void;\r\n}\r\ninterface IUpdatePanoramaTourConfig {\r\n  (): AxiosPromise<Work>;\r\n}\r\ninterface ISet_Yaw_Pitch {\r\n  (yaw: number, pitch: number): void;\r\n}\r\n\r\nexport interface IStudioState {\r\n  panoramaImages: IPanoramaImage[];\r\n  renderCanvasFlag: number;\r\n  addImage: IAddImage;\r\n  switchImage: ISwitchImage;\r\n  removeImage: IRemoveImage;\r\n  addHotSpot: IAddHotSpot;\r\n  switchHotSpot: ISwitchHotSpot;\r\n  deSelectAllHotSpots: IDeSelectAllHotSpots;\r\n  updateActivatedHotSpot: IUpdateActivatedHotSpot;\r\n  removeActivatedHotSpot: IRemoveActivatedHotSpot;\r\n  initPanoramaImages: IInitPanoramaImages;\r\n  uploadPanoramaTourConfig: IUpdatePanoramaTourConfig;\r\n  set_Yaw_Pitch: ISet_Yaw_Pitch;\r\n}\r\n\r\nlet images: IPanoramaImage[] = [];\r\n\r\nexport const useStudioState: () => IStudioState = () => {\r\n  const [panoramaImages, setPanoramaImages] = useState<IPanoramaImage[]>([]);\r\n  const [renderCanvasFlag, setRenderCanvasFlag] = useState<number>(0);\r\n  const currentRoute = useRouteMatch<StudioPageParams>();\r\n  const workID: string = currentRoute.params.workID;\r\n  const uploadPanoramaTourConfig = async () => {\r\n    return updateWork(workID, exportPanoramaTourConfig(images));\r\n  };\r\n  const startTimedUpload = () => {\r\n    return;\r\n    setTimeout(() => {\r\n      uploadPanoramaTourConfig();\r\n      startTimedUpload();\r\n    }, Math.ceil(15 + Math.random() * 15) * 1000);\r\n  };\r\n  useEffect(() => {\r\n    startTimedUpload();\r\n  }, []);\r\n\r\n  const initPanoramaImages: IInitPanoramaImages = (panoramaImages: IPanoramaImage[]) => {\r\n    for (const image of panoramaImages) {\r\n      for (const hotSpot of image.hotSpots) {\r\n        hotSpot.clickHandlerFunc = (_e: React.MouseEvent<HTMLDivElement>, hotSpot: HotSpot) => {\r\n          switchHotSpot(hotSpot.id);\r\n        };\r\n        hotSpot.clickHandlerArgs = hotSpot;\r\n        hotSpot.createTooltipFunc = createTooltipInDev(hotSpot.toolName, hotSpot);\r\n      }\r\n    }\r\n    images = panoramaImages;\r\n    setPanoramaImages(images);\r\n  };\r\n\r\n  const addImage: IAddImage = (url: string) => {\r\n    const newImages = [...images];\r\n    const newImage: IPanoramaImage = {\r\n      url,\r\n      id: generateUniqueId(),\r\n      hotSpots: [],\r\n      isEntry: images.length === 0,\r\n      activated: images.length === 0,\r\n    };\r\n    newImages.push(newImage);\r\n    images = newImages;\r\n    setPanoramaImages(images);\r\n    if (images.length === 1) {\r\n      setRenderCanvasFlag(renderCanvasFlag + 1);\r\n    }\r\n  };\r\n\r\n  const switchImage: ISwitchImage = (imageID: string) => {\r\n    const clickedImage: IPanoramaImage | undefined = images.find((item) => item.id === imageID);\r\n    if (clickedImage && !clickedImage.activated) {\r\n      const newImages = images.map((item) => {\r\n        item.activated = item.id === imageID;\r\n        return item;\r\n      });\r\n      setRenderCanvasFlag(renderCanvasFlag + 1);\r\n      images = newImages;\r\n      setPanoramaImages(images);\r\n    }\r\n  };\r\n\r\n  const removeImage: IRemoveImage = (imageID: string) => {\r\n    const newImages = images.filter((item) => item.id !== imageID);\r\n    images = newImages;\r\n    setRenderCanvasFlag(renderCanvasFlag + 1);\r\n    setPanoramaImages(images);\r\n  };\r\n\r\n  const addHotSpot: IAddHotSpot = (newHotSpot: HotSpot) => {\r\n    const newImages = [...images];\r\n    const activatedImage: IPanoramaImage | undefined = newImages.find((item) => item.activated);\r\n    if (activatedImage) {\r\n      activatedImage.hotSpots = [...activatedImage.hotSpots, newHotSpot];\r\n      images = newImages;\r\n      setPanoramaImages(images);\r\n      switchHotSpot(newHotSpot.id);\r\n    }\r\n  };\r\n\r\n  const switchHotSpot: ISwitchHotSpot = (targetID: string) => {\r\n    const newImages = [...images];\r\n    const activatedImage: IPanoramaImage | undefined = newImages.find((item) => item.activated);\r\n    if (activatedImage) {\r\n      activatedImage.hotSpots.forEach((item) => (item.activated = item.id === targetID));\r\n      images = newImages;\r\n      setPanoramaImages(images);\r\n    }\r\n  };\r\n\r\n  const deSelectAllHotSpots: IDeSelectAllHotSpots = () => {\r\n    const newImages = [...images];\r\n    const activatedImage: IPanoramaImage | undefined = newImages.find((item) => item.activated);\r\n    if (activatedImage) {\r\n      activatedImage.hotSpots.forEach((item) => (item.activated = false));\r\n      images = newImages;\r\n      setPanoramaImages(images);\r\n    }\r\n  };\r\n\r\n  const updateActivatedHotSpot: IUpdateActivatedHotSpot = (hotSpot: HotSpot) => {\r\n    const newImages = [...images];\r\n    const activatedImage: IPanoramaImage | undefined = newImages.find((item) => item.activated);\r\n    if (activatedImage) {\r\n      activatedImage.hotSpots = activatedImage.hotSpots.map((item) => {\r\n        return item.id === hotSpot.id ? hotSpot : item;\r\n      });\r\n      images = newImages;\r\n      setPanoramaImages(images);\r\n    }\r\n  };\r\n\r\n  const removeActivatedHotSpot: IRemoveActivatedHotSpot = (hotSpotID: string) => {\r\n    const newImages = [...images];\r\n    const activatedImage: IPanoramaImage | undefined = newImages.find((item) => item.activated);\r\n    if (activatedImage) {\r\n      activatedImage.hotSpots = activatedImage.hotSpots.filter((item) => {\r\n        return item.id !== hotSpotID;\r\n      });\r\n      images = newImages;\r\n      setPanoramaImages(images);\r\n    }\r\n  };\r\n\r\n  const set_Yaw_Pitch: ISet_Yaw_Pitch = (yaw: number, pitch: number) => {\r\n    const newImages = [...images];\r\n    const activatedImage: IPanoramaImage | undefined = newImages.find((item) => item.activated);\r\n    if (activatedImage) {\r\n      activatedImage.yaw = yaw;\r\n      activatedImage.pitch = pitch;\r\n      images = newImages;\r\n      setPanoramaImages(images);\r\n    }\r\n  };\r\n\r\n  return {\r\n    panoramaImages,\r\n    renderCanvasFlag,\r\n    addImage,\r\n    deSelectAllHotSpots,\r\n    switchHotSpot,\r\n    switchImage,\r\n    removeImage,\r\n    addHotSpot,\r\n    updateActivatedHotSpot,\r\n    removeActivatedHotSpot,\r\n    initPanoramaImages,\r\n    uploadPanoramaTourConfig,\r\n    set_Yaw_Pitch,\r\n  };\r\n};\r\n","import React from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { getWorkData } from 'requests/requests';\r\nimport { importPanoramaTourConfig } from 'utils';\r\nimport { IPanoramaImage, IStudioState, useStudioState } from './state';\r\ninterface IProps {\r\n  children?: JSX.Element | JSX.Element[];\r\n}\r\n\r\nexport const StudioContext = React.createContext<IStudioState>({} as IStudioState);\r\n\r\nexport const StudioContextWrapper: React.FC<IProps> = ({ children }: IProps) => {\r\n  const { pathname } = useLocation();\r\n  const workID = pathname.split('/')[2];\r\n  const studioState: IStudioState = useStudioState();\r\n  React.useEffect(() => {\r\n    const fetchData = async () => {\r\n      const res = await getWorkData(workID);\r\n      const panoramaImages: IPanoramaImage[] = importPanoramaTourConfig(res && res.data && res.data.panoramaTourConfig);\r\n      studioState.initPanoramaImages(panoramaImages);\r\n    };\r\n    fetchData();\r\n  }, [workID]);\r\n\r\n  return <StudioContext.Provider value={studioState}>{children}</StudioContext.Provider>;\r\n};\r\n","import React from 'react';\r\nimport { Box, Tooltip, makeStyles, TextField } from '@material-ui/core';\r\nimport Iconfont from 'components/Iconfont';\r\nimport { ToolNames } from 'interface';\r\nimport { useRouteMatch } from 'react-router';\r\nimport { StudioContext } from 'pages/studio/state/context';\r\nimport { message, Modal } from 'antd';\r\nimport { StudioPageParams } from 'routes/config';\r\nimport { useState } from 'react';\r\nimport { getUserPublishedWorkByWorkID, publishWork } from 'requests/requests';\r\n\r\nconst useStylesBootstrap = makeStyles(() => ({\r\n  tooltip: {\r\n    padding: '10px 15px',\r\n    fontSize: '0.7vw',\r\n  },\r\n}));\r\n\r\nconst ToolBar: React.FC = () => {\r\n  const [showPublishDialog, setShowPublishDialog] = useState(false);\r\n  const [introduction, setIntroduction] = useState('');\r\n  const {\r\n    params: { workID },\r\n  } = useRouteMatch<StudioPageParams>();\r\n  React.useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const res = await getUserPublishedWorkByWorkID(workID);\r\n        if (res && res.data) {\r\n          setIntroduction(res.data.introduction);\r\n        }\r\n      } catch (err) {\r\n        message.error(err.response?.data.message);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [workID]);\r\n\r\n  const { uploadPanoramaTourConfig, panoramaImages } = React.useContext(StudioContext);\r\n  const currentRoute = useRouteMatch<StudioPageParams>();\r\n  const classes = useStylesBootstrap();\r\n  const handleClickPublish = async () => {\r\n    setShowPublishDialog(true);\r\n  };\r\n  const handleConfirmPublish = async () => {\r\n    if (!introduction) {\r\n      message.warn('请输入作品介绍！');\r\n      return;\r\n    }\r\n    if (panoramaImages.length === 0) {\r\n      message.warn('请先导入全景图片！');\r\n      return;\r\n    }\r\n    try {\r\n      await publishWork(workID, introduction);\r\n      message.success('发布成功！');\r\n    } catch (err) {\r\n      message.error(err.response?.data.message);\r\n    } finally {\r\n      setShowPublishDialog(false);\r\n    }\r\n  };\r\n  const handleClickSave = async () => {\r\n    try {\r\n      await uploadPanoramaTourConfig();\r\n      message.success('保存成功！');\r\n    } catch (err) {\r\n      message.warn(err.response?.data.message);\r\n    }\r\n  };\r\n  const handleClickPlay = () => {\r\n    open(`/play/${currentRoute.params.workID}`);\r\n  };\r\n  const handleDragStart = (e: React.DragEvent, toolName: ToolNames) => {\r\n    e.dataTransfer.setData('toolName', toolName);\r\n  };\r\n\r\n  return (\r\n    <Box width=\"100%\" height=\"100%\" display=\"flex\" alignItems=\"center\">\r\n      <Tooltip title=\"文字标签\" classes={classes} placement=\"top\" arrow={true}>\r\n        <Box marginRight=\"20px\" draggable onDragStart={(e) => handleDragStart(e, ToolNames.Font)}>\r\n          <Iconfont name=\"icon-wenzi\" color=\"#f46a12\" fontSize=\"1.7vw\" />\r\n        </Box>\r\n      </Tooltip>\r\n      <Tooltip title=\"标签\" classes={classes} placement=\"top\" arrow={true}>\r\n        <Box marginRight=\"20px\" draggable onDragStart={(e) => handleDragStart(e, ToolNames.Tip)}>\r\n          <Iconfont name=\"icon-tishi1\" color=\"#1296db\" fontSize=\"1.7vw\" />\r\n        </Box>\r\n      </Tooltip>\r\n      <Tooltip title=\"链接\" classes={classes} placement=\"top\" arrow={true}>\r\n        <Box draggable onDragStart={(e) => handleDragStart(e, ToolNames.Link)}>\r\n          <Iconfont name=\"icon-xiangshangjiantouquan\" color=\"#1AFA29\" fontSize=\"1.7vw\" />\r\n        </Box>\r\n      </Tooltip>\r\n      <Tooltip title=\"预览\" classes={classes} placement=\"top\" arrow={true}>\r\n        <Box marginLeft=\"20px\" onClick={handleClickPlay}>\r\n          <Iconfont name=\"icon-play-01\" color=\"#bd8cbb\" fontSize=\"1.6vw\" />\r\n        </Box>\r\n      </Tooltip>\r\n      <Tooltip title=\"保存并上传\" classes={classes} placement=\"top\" arrow={true}>\r\n        <Box marginLeft=\"80px\" onClick={() => handleClickSave()}>\r\n          <Iconfont name=\"icon-shangchuan\" color=\"#00A99D\" fontSize=\"1.6vw\" />\r\n        </Box>\r\n      </Tooltip>\r\n      <Tooltip title=\"发布\" classes={classes} placement=\"top\" arrow={true}>\r\n        <Box marginLeft=\"20px\" onClick={() => handleClickPublish()}>\r\n          <Iconfont name=\"icon-fabu\" color=\"#37daf6\" fontSize=\"1.6vw\" />\r\n        </Box>\r\n      </Tooltip>\r\n      <Modal\r\n        title=\"发布全景漫游\"\r\n        keyboard\r\n        centered\r\n        visible={showPublishDialog}\r\n        onOk={() => handleConfirmPublish()}\r\n        onCancel={() => setShowPublishDialog(false)}\r\n      >\r\n        <TextField\r\n          value={introduction}\r\n          onInput={(e: React.ChangeEvent<HTMLInputElement>) => setIntroduction(e.target.value)}\r\n          label=\"为你的作品添加一些介绍文字\"\r\n          fullWidth\r\n          helperText=\"添加详细的文字可以使得其他人观看体验更佳\"\r\n          variant=\"outlined\"\r\n          minRows={4}\r\n          multiline\r\n        />\r\n      </Modal>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ToolBar;\r\n","import styled from 'styled-components';\r\n\r\nexport const Title = styled.h4`\r\n  margin-bottom: 15px;\r\n`;\r\n","import React from 'react';\r\nimport { Box, TextField, Button, Select, MenuItem } from '@material-ui/core';\r\nimport { Title } from './styled';\r\nimport { Delete as DeleteIcon } from '@material-ui/icons';\r\n\r\nimport { StudioContext } from 'pages/studio/state/context';\r\nimport { HotSpot, IPanoramaImage } from 'pages/studio/state/state';\r\nimport { ToolNames } from 'interface';\r\n\r\nconst PropertyBar: React.FC = () => {\r\n  const { panoramaImages, updateActivatedHotSpot, removeActivatedHotSpot } = React.useContext(StudioContext);\r\n  const activatedImage: IPanoramaImage | undefined = panoramaImages.find((item) => item.activated);\r\n  const hotSpotsOfActivatedImage = (activatedImage && activatedImage.hotSpots) || [];\r\n  const activatedHotSpot = hotSpotsOfActivatedImage.find((item) => item.activated);\r\n  const handleInputTip: (activatedHotSpot: HotSpot, newText: string) => void = (\r\n    activatedHotSpot: HotSpot,\r\n    newText: string,\r\n  ) => {\r\n    activatedHotSpot.text = newText;\r\n    updateActivatedHotSpot(activatedHotSpot);\r\n  };\r\n  const handleInputFontContent: (activatedHotSpot: HotSpot, newContent: string) => void = (\r\n    activatedHotSpot: HotSpot,\r\n    newContent: string,\r\n  ) => {\r\n    activatedHotSpot.fontContent = newContent;\r\n    updateActivatedHotSpot(activatedHotSpot);\r\n  };\r\n\r\n  const handleClickDeleteBtn = () => {\r\n    if (activatedHotSpot) {\r\n      removeActivatedHotSpot(activatedHotSpot.id);\r\n    }\r\n  };\r\n\r\n  const handleSelectTargetPanoramaImage: (activatedHotSpot: HotSpot, nextSceneID: string) => void = (\r\n    activatedHotSpot: HotSpot,\r\n    nextSceneID: string,\r\n  ) => {\r\n    activatedHotSpot.targetID = nextSceneID;\r\n    updateActivatedHotSpot(activatedHotSpot);\r\n  };\r\n  return (\r\n    <>\r\n      {activatedHotSpot && (\r\n        <Box height=\"100%\">\r\n          <Box>\r\n            <Title>标签文本</Title>\r\n            <TextField\r\n              value={activatedHotSpot.fontContent || ''}\r\n              onInput={(e: React.ChangeEvent<HTMLInputElement>) => {\r\n                handleInputFontContent(activatedHotSpot, e.target.value);\r\n              }}\r\n              fullWidth\r\n              id=\"outlined-multiline-static\"\r\n              label=\"修改标签文字\"\r\n              multiline\r\n              rows={4}\r\n              variant=\"outlined\"\r\n            />\r\n          </Box>\r\n\r\n          <Box marginTop=\"3vh\">\r\n            <Title>标签内容</Title>\r\n            <TextField\r\n              value={activatedHotSpot.text}\r\n              onInput={(e: React.ChangeEvent<HTMLInputElement>) => {\r\n                handleInputTip(activatedHotSpot, e.target.value);\r\n              }}\r\n              fullWidth\r\n              id=\"outlined-multiline-static\"\r\n              label=\"修改标签文字\"\r\n              multiline\r\n              rows={4}\r\n              variant=\"outlined\"\r\n            />\r\n          </Box>\r\n          {activatedHotSpot.toolName === ToolNames.Link && (\r\n            <Box marginTop=\"20px\" maxWidth=\"70%\">\r\n              <Title>目标图片</Title>\r\n              <Select\r\n                value={activatedHotSpot.targetID || ''}\r\n                onChange={(e: React.ChangeEvent<{ value: unknown }>) => {\r\n                  handleSelectTargetPanoramaImage(activatedHotSpot, e.target.value as string);\r\n                }}\r\n                fullWidth\r\n                labelId=\"demo-simple-select-label\"\r\n                id=\"demo-simple-select\"\r\n              >\r\n                {panoramaImages.reduce<JSX.Element[]>((prev, next, index) => {\r\n                  if (!next.activated) {\r\n                    prev.push(<MenuItem value={next.id}>第 {index + 1} 张</MenuItem>);\r\n                  }\r\n                  return prev;\r\n                }, [])}\r\n              </Select>\r\n            </Box>\r\n          )}\r\n          <Box marginTop=\"50px\">\r\n            <Button\r\n              onClick={() => handleClickDeleteBtn()}\r\n              variant=\"contained\"\r\n              fullWidth\r\n              color=\"secondary\"\r\n              startIcon={<DeleteIcon />}\r\n            >\r\n              删除\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PropertyBar;\r\n","import React from 'react';\r\nimport { Box } from '@material-ui/core';\r\nimport { IClickHandlerFunc, IPannellum } from 'types/pannellum/interface';\r\nimport { ToolNames } from 'interface';\r\nimport { createTooltipInDev } from 'pages/studio/components/HotSpot';\r\n\r\nimport { generateUniqueId } from 'utils';\r\nimport { StudioContext } from 'pages/studio/state/context';\r\nimport { HotSpot, IPanoramaImage, IStudioState } from 'pages/studio/state/state';\r\nlet oldHotSpots: HotSpot[] = [];\r\nconst Canvas: React.FC = () => {\r\n  const { panoramaImages, switchHotSpot, addHotSpot, deSelectAllHotSpots, set_Yaw_Pitch } =\r\n    React.useContext<IStudioState>(StudioContext);\r\n  const [pannellumInstance, setPannellumInstance] = React.useState<IPannellum | null>(null);\r\n  const activatedImage: IPanoramaImage | undefined = panoramaImages.find((item) => item.activated);\r\n  const activatedImageID = activatedImage?.id;\r\n  const reRenderImageHotSpotsOnCanvas = () => {\r\n    if (pannellumInstance && activatedImage) {\r\n      const hotSpotsOfActivatedImage = activatedImage.hotSpots;\r\n      // clear old hotSpots\r\n      for (const hotSpot of oldHotSpots) {\r\n        pannellumInstance.removeHotSpot(hotSpot.id);\r\n      }\r\n      // add new hotSpots\r\n      for (const hotSpot of hotSpotsOfActivatedImage) {\r\n        pannellumInstance.addHotSpot(hotSpot);\r\n      }\r\n      // update old hotSpots\r\n      oldHotSpots = hotSpotsOfActivatedImage;\r\n    }\r\n  };\r\n  reRenderImageHotSpotsOnCanvas();\r\n\r\n  const handleClickHotSpot: IClickHandlerFunc = (_e: React.MouseEvent<HTMLDivElement>, hotSpot: HotSpot) => {\r\n    switchHotSpot(hotSpot.id);\r\n  };\r\n\r\n  const handleMouseDrop = (p: IPannellum | null, e: React.DragEvent, toolName: ToolNames) => {\r\n    if (!p) return;\r\n    if (!toolName) return;\r\n    const [pitch, yaw] = p.mouseEventToCoords(e);\r\n    const hotSpotID = generateUniqueId();\r\n    const newHotSpot: HotSpot = {\r\n      id: hotSpotID,\r\n      pitch,\r\n      yaw,\r\n      toolName,\r\n      type: 'info',\r\n      clickHandlerFunc: handleClickHotSpot,\r\n      text: '',\r\n    };\r\n    newHotSpot.clickHandlerArgs = newHotSpot;\r\n    newHotSpot.createTooltipFunc = createTooltipInDev(toolName, newHotSpot);\r\n    addHotSpot(newHotSpot);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (!activatedImage) return;\r\n    if (pannellumInstance) {\r\n      pannellumInstance.destroy();\r\n    }\r\n\r\n    const p = window.pannellum.viewer('panorama', {\r\n      default: {\r\n        firstScene: 'scene0',\r\n        sceneFadeDuration: 1000,\r\n      },\r\n      scenes: {\r\n        scene0: {\r\n          panorama: activatedImage.url,\r\n          autoLoad: true,\r\n          yaw: activatedImage.yaw || 0,\r\n          pitch: activatedImage.pitch || 0,\r\n          type: 'equirectangular',\r\n          hotSpots: [],\r\n        },\r\n      },\r\n    }) as IPannellum;\r\n    p.on('mouseup', () => {\r\n      deSelectAllHotSpots();\r\n      set_Yaw_Pitch(p.getYaw(), p.getPitch());\r\n    });\r\n    setPannellumInstance(p);\r\n  }, [activatedImageID]);\r\n\r\n  return (\r\n    <>\r\n      {activatedImage ? (\r\n        <Box\r\n          height=\"100%\"\r\n          onContextMenuCapture={(e) => {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n          }}\r\n          onDrop={(e) => handleMouseDrop(pannellumInstance, e, e.dataTransfer.getData('toolName') as ToolNames)}\r\n          onDragOver={(e) => e.preventDefault()}\r\n          width=\"100%\"\r\n          id=\"panorama\"\r\n        ></Box>\r\n      ) : (\r\n        '请选择一张全景图片'\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Canvas;\r\n","import styled from 'styled-components';\r\n\r\nexport const FileInput = styled.input`\r\n  display: none;\r\n`;\r\n","import React from 'react';\r\nimport { Button, Box } from '@material-ui/core';\r\nimport { CloudUpload as CloudUploadIcon } from '@material-ui/icons';\r\nimport { FileInput } from './styled';\r\n\r\ninterface Props {\r\n  text: string;\r\n  onChooseImage: (files: FileList | null) => void;\r\n}\r\n\r\nconst UploadButton: React.FC<Props> = ({ text, onChooseImage }: Props) => {\r\n  const handleChooseImage = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    onChooseImage(e.target.files);\r\n  };\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"center\">\r\n      <FileInput onInput={handleChooseImage} accept=\"image/*\" id=\"contained-button-file\" type=\"file\" />\r\n      <label htmlFor=\"contained-button-file\">\r\n        <Button variant=\"contained\" color=\"primary\" component=\"span\" startIcon={<CloudUploadIcon />}>\r\n          {text}\r\n        </Button>\r\n      </label>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default UploadButton;\r\n","import styled from 'styled-components';\r\nimport { Box } from '@material-ui/core';\r\n\r\nexport const Wrapper = styled(Box)`\r\n  width: 100%;\r\n  overflow: auto;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\n\r\nexport const Image = styled.img`\r\n  width: 100%;\r\n  height: 80px;\r\n`;\r\n\r\nexport const SliderBox = styled(Box)`\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  display: flex;\r\n  height: 80px;\r\n  transition: 0.3s;\r\n`;\r\n\r\nexport const ImageBox = styled(Box)`\r\n  position: relative;\r\n  margin-top: 10px;\r\n  width: 80%;\r\n  height: 80px;\r\n  overflow: hidden;\r\n  cursor: pointer;\r\n`;\r\n","import React from 'react';\r\n\r\nimport { Wrapper, Image, ImageBox, SliderBox } from './styled';\r\n\r\nimport classes from './classes.module.css';\r\nimport { IPanoramaImage } from 'pages/studio/state/state';\r\n\r\ninterface Props {\r\n  images: IPanoramaImage[];\r\n  onClickImage: (image: IPanoramaImage) => void;\r\n}\r\n\r\nconst ImageList: React.FC<Props> = ({ images, onClickImage }: Props) => {\r\n  const renderImages = () => {\r\n    return images.map((image) => {\r\n      return (\r\n        <ImageBox\r\n          onClick={() => onClickImage(image)}\r\n          key={image.id}\r\n          className={image.activated ? classes.activated : ''}\r\n        >\r\n          <SliderBox>\r\n            <Image src={image.url} alt={image.url} />\r\n          </SliderBox>\r\n        </ImageBox>\r\n      );\r\n    });\r\n  };\r\n  return <Wrapper>{renderImages()}</Wrapper>;\r\n};\r\n\r\nexport default ImageList;\r\n","import styled from 'styled-components';\r\nimport { Box } from '@material-ui/core';\r\n\r\nexport const Wrapper = styled(Box)`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: grid;\r\n  grid-template-columns: 100%;\r\n  grid-template-rows: 6% 80% 5%;\r\n  gap: 3%;\r\n`;\r\n","import React from 'react';\r\nimport UploadButton from 'components/UploadButton';\r\nimport ImageList from './components/ImageList';\r\nimport * as qiniu from 'qiniu-js';\r\nimport { QiniuCompeleteRes } from 'interface';\r\nimport { Wrapper } from './styled';\r\nimport { Button, CircularProgress, Backdrop } from '@material-ui/core';\r\nimport { Delete as DeleteIcon } from '@material-ui/icons';\r\nimport classes from './classes.module.css';\r\nimport { StudioContext } from 'pages/studio/state/context';\r\nimport { IPanoramaImage } from 'pages/studio/state/state';\r\nimport { getQiniuToken } from 'requests/requests';\r\n\r\nconst ImagesBar: React.FC = () => {\r\n  const { panoramaImages, removeImage, switchImage, addImage } = React.useContext(StudioContext);\r\n  const [loading, setLoading] = React.useState<boolean>(false);\r\n  const [token, setToken] = React.useState<string>('');\r\n  const uploadFile = async (file: File) => {\r\n    return new Promise<QiniuCompeleteRes>((resolve, reject) => {\r\n      const observer = {\r\n        error(err: unknown) {\r\n          reject(err);\r\n        },\r\n        complete(res: QiniuCompeleteRes) {\r\n          resolve(res);\r\n        },\r\n      };\r\n      const observable = qiniu.upload(file, undefined, token);\r\n      observable.subscribe(observer);\r\n    });\r\n  };\r\n\r\n  const handleClickDelete = (activatedImage: IPanoramaImage | undefined) => {\r\n    if (activatedImage) {\r\n      removeImage(activatedImage.id);\r\n    }\r\n  };\r\n\r\n  const handleClickImage: (image: IPanoramaImage) => void = (image: IPanoramaImage) => {\r\n    switchImage(image.id);\r\n  };\r\n\r\n  const handleChooseFile = async (files: FileList | null) => {\r\n    if (files && files[0]) {\r\n      try {\r\n        setLoading(true);\r\n        const res: QiniuCompeleteRes = await uploadFile(files[0]);\r\n        const url = process.env.REACT_APP_IMAGE_PREFIX + '/' + res.hash;\r\n        addImage(url);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const fetchToken = async () => {\r\n      try {\r\n        const res = await getQiniuToken();\r\n        setToken(res.data);\r\n      } catch (err) {}\r\n    };\r\n    fetchToken();\r\n  }, []);\r\n  return (\r\n    <>\r\n      <Wrapper>\r\n        <UploadButton text=\"导入图片\" onChooseImage={handleChooseFile} />\r\n        <ImageList onClickImage={handleClickImage} images={panoramaImages} />\r\n        <Button\r\n          onClick={() => handleClickDelete(panoramaImages.find((item) => item.activated))}\r\n          variant=\"contained\"\r\n          fullWidth\r\n          color=\"secondary\"\r\n          startIcon={<DeleteIcon />}\r\n        >\r\n          删除\r\n        </Button>\r\n      </Wrapper>\r\n      <Backdrop open={loading} className={classes.backdrop}>\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ImagesBar;\r\n","import React from 'react';\r\nimport VR from 'assets/VR.png';\r\nimport { Box } from '@material-ui/core';\r\nimport { Wrapper, Container, LogoBox, Logo, HeaderBox, MenuBox, ContentBox } from 'layouts';\r\nimport Tools from './modules/tool-bar';\r\nimport Properties from './modules/property-bar';\r\nimport Canvas from './modules/canvas';\r\nimport ImagesBar from './modules/images-bar';\r\nimport classes from './index.module.css';\r\n\r\nimport { StudioContextWrapper } from './state/context';\r\n\r\nconst Studio: React.FC = () => {\r\n  return (\r\n    <StudioContextWrapper>\r\n      <Wrapper>\r\n        <Container maxWidth={false} className={classes.container}>\r\n          <LogoBox>\r\n            <Logo src={VR} />\r\n          </LogoBox>\r\n          <HeaderBox>\r\n            <h2>制作你的全景漫游</h2>\r\n          </HeaderBox>\r\n          <MenuBox>\r\n            <ImagesBar />\r\n          </MenuBox>\r\n          <ContentBox className={classes.contentLayout}>\r\n            <Box gridArea=\"tools\" padding=\"5px 20px\" border=\"1px solid #d1caca\" borderRadius=\"10px\">\r\n              <Tools />\r\n            </Box>\r\n            <Box gridArea=\"canvas\">\r\n              <Canvas />\r\n            </Box>\r\n            <Box gridArea=\"properties\">\r\n              <Properties />\r\n            </Box>\r\n          </ContentBox>\r\n        </Container>\r\n      </Wrapper>\r\n    </StudioContextWrapper>\r\n  );\r\n};\r\n\r\nexport default Studio;\r\n","import React from 'react';\r\nimport { Box } from '@material-ui/core';\r\nimport { createTooltipInProd } from 'pages/studio/components/HotSpot';\r\nimport { useRouteMatch } from 'react-router-dom';\r\nimport { message } from 'antd';\r\nimport { getWorkData } from 'requests/requests';\r\nimport { StudioPageParams } from 'routes/config';\r\n\r\nconst Play: React.FC = () => {\r\n  const currentRoute = useRouteMatch<StudioPageParams>();\r\n  const workID = currentRoute.params.workID;\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const addHotSpotStyle = (config: any) => {\r\n    const scenes = config.scenes;\r\n    for (const key in scenes) {\r\n      const hotSpots = scenes[key].hotSpots;\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      scenes[key].hotSpots = hotSpots.map((item: any) => {\r\n        item.createTooltipFunc = createTooltipInProd(item);\r\n        return item;\r\n      });\r\n    }\r\n    return config;\r\n  };\r\n  React.useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const res = await getWorkData(workID);\r\n        if (res && res.data && res.data.panoramaTourConfig) {\r\n          window.pannellum.viewer('panorama', addHotSpotStyle(res.data.panoramaTourConfig));\r\n        }\r\n      } catch (err) {\r\n        message.warn(err.response?.data.message);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [workID]);\r\n  return <Box id=\"panorama\" width=\"100vw\" height=\"100vh\"></Box>;\r\n};\r\n\r\nexport default Play;\r\n","import SignIn from 'pages/signin';\r\nimport SignUp from 'pages/signup';\r\nimport Home from 'pages/home';\r\nimport HomePageRoutes from 'pages/home/routes';\r\nimport Studio from 'pages/studio';\r\nimport Play from 'pages/play';\r\n\r\nimport { IRoute } from 'routes/index';\r\nimport { HOCRouteTypes } from 'interface';\r\n\r\nexport interface StudioPageParams {\r\n  workID: string;\r\n}\r\n\r\nexport const routes: IRoute[] = [\r\n  {\r\n    path: '/',\r\n    exact: true,\r\n    redirect: {\r\n      target: '/dashboard',\r\n    },\r\n  },\r\n  {\r\n    path: '/dashboard',\r\n    component: Home,\r\n    HOCRouteType: HOCRouteTypes.protected,\r\n    children: HomePageRoutes,\r\n  },\r\n  {\r\n    path: '/studio/:workID',\r\n    component: Studio,\r\n  },\r\n  {\r\n    path: '/play/:workID',\r\n    component: Play,\r\n  },\r\n  {\r\n    path: '/signin',\r\n    component: SignIn,\r\n    HOCRouteType: HOCRouteTypes.public,\r\n  },\r\n  {\r\n    path: '/signup',\r\n    component: SignUp,\r\n    HOCRouteType: HOCRouteTypes.public,\r\n  },\r\n];\r\n","import { Redirect, Route, RouteProps, Switch } from 'react-router-dom';\r\n\r\nimport { IHOCRoute, HOCRouteTypes } from 'interface';\r\nimport PublicRoute from 'HOCRoute/public.route';\r\nimport ProtectedRoute from 'HOCRoute/protected.route';\r\n\r\nimport { routes } from 'routes/config';\r\n\r\nexport interface IRedirect {\r\n  target: string;\r\n}\r\n\r\nexport interface IRoute extends RouteProps {\r\n  HOCRouteType?: HOCRouteTypes;\r\n  children?: IRoute[];\r\n  redirect?: IRedirect;\r\n  component?: React.FC;\r\n}\r\n\r\nconst HOCRoutes = new Map<HOCRouteTypes, IHOCRoute>();\r\nHOCRoutes.set(HOCRouteTypes.public, PublicRoute);\r\nHOCRoutes.set(HOCRouteTypes.protected, ProtectedRoute);\r\n\r\nconst searchRoutesByPath: (routes: IRoute[], path: string | null) => IRoute[] = (\r\n  routes: IRoute[],\r\n  path: string | null,\r\n) => {\r\n  if (path === null) return routes;\r\n  for (const route of routes) {\r\n    if (route.path === path) {\r\n      return route?.children || [];\r\n    } else if (route.children) {\r\n      return searchRoutesByPath(route.children, path);\r\n    }\r\n  }\r\n  return [];\r\n};\r\n\r\nexport const renderRoutes: (path: string | null) => React.ReactNode = (path: string | null) => {\r\n  const matchedRoutes: IRoute[] = searchRoutesByPath(routes, path);\r\n  const pathPrefix = path || '';\r\n  const Routes: React.ReactNode = matchedRoutes.map((route, index) => {\r\n    let RouteComponent: IHOCRoute | typeof Route = Route;\r\n    if (route.redirect) {\r\n      return (\r\n        <Route key={index} exact={Boolean(route.exact)} path={pathPrefix + route.path}>\r\n          <Redirect to={pathPrefix + route.redirect.target} />\r\n        </Route>\r\n      );\r\n    }\r\n\r\n    if (route.HOCRouteType !== undefined) {\r\n      RouteComponent = HOCRoutes.get(route.HOCRouteType) || Route;\r\n    }\r\n    return (\r\n      <RouteComponent\r\n        component={route.component}\r\n        exact={Boolean(route.exact)}\r\n        path={pathPrefix + route.path}\r\n        key={index}\r\n      ></RouteComponent>\r\n    );\r\n  });\r\n  return <Switch>{Routes}</Switch>;\r\n};\r\n","import { BrowserRouter as Router } from 'react-router-dom';\r\n\r\nimport { renderRoutes } from 'routes/index';\r\nimport { useAuth } from 'auth/auth';\r\nimport { LanguageWrapper } from 'language';\r\n\r\nfunction App(): JSX.Element {\r\n  const { AuthProvider } = useAuth();\r\n  return (\r\n    <LanguageWrapper>\r\n      <AuthProvider>\r\n        <Router>\r\n          <div className=\"App\">{renderRoutes(null)}</div>\r\n        </Router>\r\n      </AuthProvider>\r\n    </LanguageWrapper>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nfunction reportWebVitals(onPerfEntry?: ReportHandler): void {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './reset.css';\nimport 'antd/dist/antd.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageWrapper\":\"classes_imageWrapper__3J9iA\",\"backDrop\":\"classes_backDrop__24N3X\",\"comment\":\"classes_comment__17NBb\",\"commentHeader\":\"classes_commentHeader__AqYBW\",\"avatar\":\"classes_avatar__d6Z0A\",\"nationalFlag\":\"classes_nationalFlag__1V16Y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hotSpot\":\"classes_hotSpot__2MNy0\",\"iconHotSpot\":\"classes_iconHotSpot__1QBX4\",\"tag\":\"classes_tag__FI6RF\",\"activatedHotSpot\":\"classes_activatedHotSpot__396ut\",\"fontHotSpot\":\"classes_fontHotSpot__3Y218\",\"fontTag\":\"classes_fontTag__wjF9W\"};"],"sourceRoot":""}